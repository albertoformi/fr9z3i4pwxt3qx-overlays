var optgroupState={};function _getAllValuesCustomClose(){var options={};options['color']=jQuery('.doclosebtn-text-color').val();options['backgroundColor']=jQuery('.doclosebtn-bg-color').val();options['fontsize']=jQuery('.post_doclosebtn_fontsize').val();options['borderRadius']=jQuery('.post_doclosebtn_borderradius').val();options['padding']=jQuery('.post_doclosebtn_padding').val();return options};function matchStart(params,data){if(jQuery.trim(params.term)===''){var check_groups=jQuery('.select2-results__options.select2-results__options--nested:first-child');if(check_groups.css('display')!=='hide'){setTimeout(()=>{var groups=jQuery('.select2-container--open .select2-results__group');var id=jQuery('.select2-results__options').attr('id');if(!optgroupState[id]){optgroupState[id]={}}jQuery.each(groups,(index,v)=>{optgroupState[id][index]=optgroupState[id][index]||false;jQuery(v).siblings().hide()})},100)}return data}if(typeof data.children==='undefined'){return null}var filteredChildren=[];jQuery.each(data.children,function(idx,child){if(child.text.toUpperCase().indexOf(params.term.toUpperCase())==0){filteredChildren.push(child)}});if(filteredChildren.length){var modifiedData=jQuery.extend({},data,true);modifiedData.children=filteredChildren;return modifiedData}return null}function openTabContent(evt,tabID,tabcontent,tablinks,activeClass){var i,tabcontent,tablinks;tabcontent=document.getElementsByClassName(tabcontent);for(i=0;i<tabcontent.length;i+=1){tabcontent[i].style.display="none"}tablinks=document.getElementsByClassName(tablinks);for(i=0;i<tablinks.length;i+=1){tablinks[i].className=tablinks[i].className.replace(" "+activeClass,"")}document.getElementById(tabID).style.display="block";evt.currentTarget.className+=" "+activeClass}jQuery(function($){let postBody=$('body');$('.divi-life-logo-head').detach().appendTo('#divioverlay_postsettings .postbox-header');$('#divioverlay_postsettings .postbox-header').addClass('animate-diagonal-stripe');$('#divioverlay_postsettings .postbox-header .ui-sortable-handle').addClass('do-hndle');$('#divioverlay_postsettings .postbox-header .ui-sortable-handle').removeClass('hndle');$('#divioverlay_postsettings .postbox-header .do-hndle').removeClass('ui-sortable-handle');$('.do-tablinks').on('click',function(e){e.preventDefault();var tabid=$(this).attr('data-tabid');openTabContent(e,tabid,"do-tabcontent","do-tablinks",'active')});if($('.divi-life-logo-container').length){$(".chosen").select2({width:'100%',theme:"classic",minimumResultsForSearch:Infinity});var effects_entrance=$("#et_pb_divioverlay_effect_entrance_hidden"),effects_entrance_options=effects_entrance.html(),effects_exit=$("#et_pb_divioverlay_effect_exit_hidden"),effects_exit_options=effects_exit.html();effects_entrance.remove();$("#et_pb_divioverlay_effect_entrance").append(effects_entrance_options);effects_exit.remove();$("#et_pb_divioverlay_effect_exit").append(effects_exit_options);$(".overlay-animations").select2({width:'100%',theme:"classic",matcher:matchStart});postBody.on('click','#select2-et_pb_divioverlay_effect_entrance-results .select2-results__group, #select2-et_pb_divioverlay_effect_exit-results .select2-results__group',function(){$(this).siblings().toggle();var id=$(this).closest('.select2-results__options').attr('id');var index=$('.select2-results__group').index(this);optgroupState[id][index]=!optgroupState[id][index]});$('#et_pb_divioverlay_effect_entrance, #et_pb_divioverlay_effect_exit').on('select2:open',function(){$('.select2-dropdown--below').css('opacity',0);setTimeout(()=>{var groups=$('.select2-container--open .select2-results__group');var id=$('.select2-results__options').attr('id');if(!optgroupState[id]){optgroupState[id]={}}$.each(groups,(index,v)=>{optgroupState[id][index]=optgroupState[id][index]||false;optgroupState[id][index]?$(v).siblings().show():$(v).siblings().hide()});$('.select2-dropdown--below').css('opacity',1)},0)});postBody.on('change','.post_overlay_automatictrigger',function(event){var type_at=$(this).val();if(type_at=='overlay-timed'){$('.divi_automatictrigger_timed').addClass('do-show')}else{$('.divi_automatictrigger_timed').removeClass('do-show')}if(type_at=='overlay-scroll'){$('.divi_automatictrigger_scroll').addClass('do-show')}else{$('.divi_automatictrigger_scroll').removeClass('do-show')}if(type_at.length>1){$('.do-at-devices').addClass('do-show');$('.do-at-onceperload').addClass('do-show');$('.do-at-scheduling').addClass('do-show')}else{$('.do-at-devices').removeClass('do-show');$('.do-at-onceperload').removeClass('do-show');$('.do-at-scheduling').removeClass('do-show')}});postBody.on('click','[data-showhideblock]',function(event){var block_content=$(this).data('showhideblock');if($(this).is(':checked')){$(block_content).addClass('do-show')}else{$(block_content).removeClass('do-show')}});$('[data-dropdownshowhideblock]').change(function(){var dropdown_id=$(this).attr('id'),showhideblock=$(this).find(':selected').data('showhideblock');$(this).find('option[data-showhideblock]').each(function(){var elemRef=$(this).data('showhideblock');$(elemRef).removeClass('do-show')});if(showhideblock!==undefined){$(showhideblock).addClass('do-show')}})}var select='select[name="dov_settings[dov_timezone]"]';if($(select).length){var timezones=moment.tz.names(),timezone_title;for(var i=0;i<timezones.length;i+=1){timezone_title=timezones[i].replace('_',' ');$(select).append('<option value="'+timezones[i]+'">'+timezone_title+'</option>')}$(select).selectpicker({liveSearch:true}).on('loaded.bs.select',function(e){var default_value=$(select).data('defaultvalue');if(default_value!=''){$(select).selectpicker('val',default_value)}})}var dodateWidgetParent=$('.do-onetime .et-fb-form__group');$('input[name="do_date_start"]').datetimepickerr({sideBySide:true,showTodayButton:true,stepping:30,widgetPositioning:{horizontal:'auto',vertical:'top'},widgetParent:dodateWidgetParent,minDate:moment().subtract(1,'days'),format:'MM/DD/YYYY h:mm A',showClear:true,toolbarPlacement:'bottom',defaultDate:moment()},function(start,end,label){});$('input[name="do_date_end"]').datetimepickerr({sideBySide:true,stepping:30,widgetPositioning:{horizontal:'right',vertical:'top'},widgetParent:dodateWidgetParent,minDate:moment().subtract(1,'days'),format:'MM/DD/YYYY h:mm A',showClear:true,toolbarPlacement:'bottom',defaultDate:moment(),useCurrent:false},function(start,end,label){});$('input[name="do_time_start"]').datetimepickerr({format:'LT',stepping:30,widgetPositioning:{horizontal:'auto',vertical:'top'},showClear:true,format:'h:mm A',toolbarPlacement:'bottom'},function(start,end,label){});$('input[name="do_time_end"]').datetimepickerr({format:'LT',stepping:30,widgetPositioning:{horizontal:'auto',vertical:'top'},showClear:true,format:'h:mm A',toolbarPlacement:'bottom'},function(start,end,label){});$('input[name="do_date_start"],input[name="do_date_end"],input[name="do_time_start"],input[name="do_time_end"]').on("dp.change",function(e){$('.do-recurring-user-msg').removeClass('do-show')});$('.post-type-divi_overlay form#post').submit(function(e){let automatictrigger=$('#post_overlay_automatictrigger').val();if(automatictrigger==='overlay-timed'){let recurring_msg=$('.do-recurring-user-msg'),recurring_msg_position;if($('.divioverlay-enable-scheduling option:selected').val()==1){var do_date_start=$('input[name="do_date_start"]'),do_date_start_value=do_date_start.val(),do_date_end=$('input[name="do_date_end"]');do_date_end_value=do_date_end.val(),date_start='',date_end='';if(do_date_start_value!=''&&do_date_end_value!=''){date_start=moment(do_date_start_value,'MM/DD/YYYY h:mm A');date_end=moment(do_date_end_value,'MM/DD/YYYY h:mm A');if(date_start.isBefore(date_end)===false){do_date_end.focus();recurring_msg.html('<p><strong>"End date"</strong> field should be greater than <strong>"Start date"</strong> field.</p>').addClass('do-show').removeClass('do-hide');recurring_msg_position=recurring_msg.offset().top-100;$('html,body').animate({scrollTop:recurring_msg_position},500);return false}}}if($('.divioverlay-enable-scheduling option:selected').val()==2){var do_time_start=$('input[name="do_time_start"]');do_time_start_value=do_time_start.val(),do_time_end=$('input[name="do_time_end"]'),do_time_end_value=do_time_end.val(),time_start='',time_end='';if(do_time_start_value!=''&&do_time_end_value!=''){time_start=moment(do_time_start_value,'h:mm A');time_end=moment(do_time_end_value,'h:mm A');if(time_start.isBefore(time_end)===false){do_time_end.focus();recurring_msg.html('<p><strong>"End Time"</strong> field should be greater than <strong>"Start Time"</strong> field.</p>').addClass('do-show').removeClass('do-hide');recurring_msg_position=recurring_msg.offset().top-100;$('html,body').animate({scrollTop:recurring_msg_position},500);return false}}}}})});function CustomClose(options){this.htmlElement=jQuery('.overlay-customclose-btn');this.color=options['color']||'#333333';this.backgroundColor=options['backgroundColor']||'';this.fontsize=options['fontsize']||'25px';this.borderRadius=options['borderRadius']||'0%';this.padding=options['padding']||'0%'};CustomClose.prototype.update=function(){this.htmlElement.css('color',this.color,'important');this.htmlElement.css('background-color',this.backgroundColor,'important');this.htmlElement.css('-moz-border-radius',this.borderRadius,'important');this.htmlElement.css('-webkit-border-radius',this.borderRadius,'important');this.htmlElement.css('-khtml-border-radius',this.borderRadius,'important');this.htmlElement.css('font-size',this.fontsize,'important');this.htmlElement.css('border-radius',this.borderRadius,'important');this.htmlElement.css('padding',this.padding,'important')};;(function($,window,document,undefined){'use strict';var divioverlay_postsettings=$('#divioverlay_postsettings');if(divioverlay_postsettings.length!==0){var autoClickFbDesktopButtonPass=true;function autoClickFbDesktopButton(){if($('#et_pb_layout').hasClass('et-loaded')&&autoClickFbDesktopButtonPass===true){autoClickFbDesktopButtonPass=false;$(".et-fb-page-settings-bar .et-fb-icon--desktop").closest("button").click();loadDiviOverlaysPostUI();getDisplayConditionsList();hideBasicPreviews();windowMenuOptions()}else{setTimeout(()=>{autoClickFbDesktopButton()},100)}}if($("body.wp-admin form#post").length){$("#et-bfb-app-frame").on("load",function(){autoClickFbDesktopButton()})}var dmpsSingleton=0,cacheResults={},allProps={},tippyIns=null,postHead=$('head'),postBody=$('body'),tab_content_background=$('#do-tab-1'),tab_content_sizing=$('#do-tab-7 [data-styletagclass="sizing"]'),tab_content_positioning=$('#do-tab-7 [data-styletagclass="positioning"]'),tab_content_positioning_pointoforigin=$('#do-tab-7 [data-styletagclass="positioning_pointoforigin"]'),tab_content_closebutton=$('#do-tab-5 [data-styletagclass="closebutton"]'),tab_content_closebuttonpositioning=$('#do-tab-5 [data-styletagclass="closebuttonpositioning"]'),tab_content_closebuttonpositioning_pointoforigin=$('#do-tab-5 [data-styletagclass="closebuttonpositioning_pointoforigin"]'),cssSelectorActiveFbSettingsTabTitle='et-fb-settings-tab-title-active',etBfbAppFrame='',etBfbAppFrameHTML='',etBfbAppFrameBody='',etBfbAppFrameArticle='',etBfbAppFrameArticleInnerContent='',etbfb_style_tags={"background":{"cssSelector":'.post-type-divi_overlay .et_divi_builder','classTag':'divi-overlays-style-background','onBuilder':false,'extraStyles':''},"closebutton":{"cssSelector":'body.divi_overlay-singletemplate .overlay-close','classTag':'divi-overlays-style-closebutton','onBuilder':true,'extraStyles':''},"closebuttonpositioning":{"cssSelector":'body.divi_overlay-singletemplate .overlay-close','classTag':'divi-overlays-style-closebuttonpositioning','onBuilder':true,'extraStyles':''},"closebuttonpositioning_pointoforigin":{"cssSelector":'body.divi_overlay-singletemplate .overlay-close-container','classTag':'divi-overlays-style-closebuttonpositioningpointoforigin','onBuilder':true,'extraStyles':''},"sizing":{"cssSelector":'body.et-db.et-bfb > .et-fb-root-ancestor','classTag':'divi-overlays-style-sizing','onBuilder':true,'extraStyles':''},"positioning":{"cssSelector":'body.et-db.et-bfb > .et-fb-root-ancestor .et-fb-post-content','classTag':'divi-overlays-style-positioning','onBuilder':true,'extraStyles':''},"positioning_pointoforigin":{"cssSelector":'body.divi_overlay-singletemplate.et-db.et-bfb > .et-fb-root-ancestor','classTag':'divi-overlays-style-pointoforigin','onBuilder':true,'extraStyles':''}},displaylocations_grouplabels=$('.divilife_displaylocations .et-tb-template-settings-group-setting.do-dloptions'),displaylocations_subcontent=$('.divilife_displaylocations_subcontent'),displaylocations_subcontent_dlvalues=$('.divilife_displaylocations_subcontent_dlvalues'),sublist_container=$('<div/>',{"class":'et-tb-template-settings-sublist'}),sublist_container_panel=$('<div/>',{"class":'et-tb-template-settings-sublist__panel'}),sublist_container_scroll=$('<div/>',{"class":'et-tb-template-settings-sublist__scroll'}),sublist_container_content=$('<div/>',{"class":'et-tb-template-settings-sublist__content'}),sublist_container_content_grouplistlabel=$('<label/>',{"class":'et-common-checkbox-group__label'}),sublist_container_content_grouplist=$('<div/>',{"class":'et-common-checkbox-group'}),divilife_logoicon_container=$('<div/>',{"class":'divi-life-logo-icon_container'}),groupReference='useon',groupReferenceUseOn=$('.displaylocations-useon'),groupReference=groupReferenceUseOn.css('display')==='block'?'useon':'excludefrom',incrementorControlTime=0,colorPaletteCSSClass='et-fb-settings-color-manager__toggle-palette',colorManagerPreviewCSSClass='et-fb-settings-option-color--has-preview',divilife_logoicon=$('<div/>',{"class":'divi-life-logo-icon diviliferotate'}),divilife_logo=divilife_logoicon_container.html(divilife_logoicon),css_animate='animate__animated',css_animate_bounceIn='do_animate__bounceIn',css_animate__faster='animate__faster',hs=function(e){var ajaxParam=$.param(e);if(typeof cacheResults[$.param(e)]!=='undefined'){return cacheResults[$.param(e)]}else{return false}},ms=function(e){return new Promise(function(t,n){$.ajax({type:"GET",dataType:"json",url:divioverlays_ajax_url,data:e,success:t,error:n})}).then(function(t){return!0===t.success?((function(e,t){cacheResults[$.param(e)]=t})(e,t.data),t.data):Promise.reject()})},sHide='do-hide',settingsWrapper=$('#divioverlay_postsettings'),settingsHeader=settingsWrapper.find('.postbox-header'),settingsBody=settingsWrapper.find('.inside'),settingsBodyTabs=settingsBody.find('.do-tab'),settingsContainer=$('<div/>',{"class":'do_container_settings'}),settingsResizeHandler=$('<div/>',{"id":'settingsBodyResizeHandler',"type":'button',"class":'et-fb-button et-fb-button--inverse et-fb-button--round et-fb-button--small et-fb-modal__resize ui-resizable-handle ui-resizable-se'}).html('<div class="et-fb-icon et-fb-icon--resize" style="fill: rgb(255, 255, 255); width: 28px; min-width: 28px; height: 28px; margin: -6px;"><svg viewBox="0 0 28 28" preserveAspectRatio="xMidYMid meet" shape-rendering="geometricPrecision"><g><path d="M11.715 12.858l-2.292-2.291a1.885 1.885 0 0 1-1.381 1.524A1.041 1.041 0 0 1 7 11.049V7.431C7 7.193 7.193 7 7.431 7h3.618c.575 0 1.041.467 1.042 1.042a1.884 1.884 0 0 1-1.523 1.38l2.292 2.291 5.728 5.728a1.886 1.886 0 0 1 1.37-1.532c.575 0 1.041.467 1.042 1.042v3.618a.431.431 0 0 1-.431.431h-3.618a1.043 1.043 0 0 1-1.042-1.042 1.887 1.887 0 0 1 1.533-1.371l-5.728-5.728z" fill-rule="evenodd"></path></g></svg></div><canvas class="ink" height="0" width="0" style="border-radius: inherit; height: 200%; left: -50%; position: absolute; top: -50%; width: 200%;"></canvas>'),settingsMinimizeHandler=$('<button/>',{"data-tip":'Minimize Modal',"class":'do-minimize-modalsettings et-fb-button et-fb-button--primary',"currentitem":'false'}).html('<div class="et-fb-icon et-fb-icon--contract" style="fill: rgb(255, 255, 255); width: 28px; min-width: 28px; height: 28px; margin: -6px;"><svg viewBox="0 0 28 28" preserveAspectRatio="xMidYMid meet" shape-rendering="geometricPrecision"><g><path d="M20 19L20 9C20 8.5 19.5 8 19 8L9 8C8.5 8 8 8.5 8 9L8 19C8 19.5 8.5 20 9 20L19 20C19.5 20 20 19.5 20 19L20 19ZM18 18L10 18 10 10 18 10 18 18 18 18Z" fill-rule="evenodd"></path><path d="M11.5 13.5C11.8 13.5 12 13.3 12 13L12 12 13 12C13.3 12 13.5 11.8 13.5 11.5 13.5 11.2 13.3 11 13 11L11.5 11C11.2 11 11 11.2 11 11.5L11 13C11 13.3 11.2 13.5 11.5 13.5L11.5 13.5Z" fill-rule="evenodd"></path><path d="M16.5 11L15 11C14.7 11 14.5 11.2 14.5 11.5 14.5 11.8 14.7 12 15 12L16 12 16 13C16 13.3 16.2 13.5 16.5 13.5 16.8 13.5 17 13.3 17 13L17 11.5C17 11.2 16.8 11 16.5 11L16.5 11Z" fill-rule="evenodd"></path><path d="M13 16L12 16 12 15C12 14.7 11.8 14.5 11.5 14.5 11.2 14.5 11 14.7 11 15L11 16.5C11 16.8 11.2 17 11.5 17L13 17C13.3 17 13.5 16.8 13.5 16.5 13.5 16.2 13.3 16 13 16L13 16Z" fill-rule="evenodd"></path><path d="M16.5 14.5C16.2 14.5 16 14.7 16 15L16 16 15 16C14.7 16 14.5 16.2 14.5 16.5 14.5 16.8 14.7 17 15 17L16.5 17C16.8 17 17 16.8 17 16.5L17 15C17 14.7 16.8 14.5 16.5 14.5L16.5 14.5Z" fill-rule="evenodd"></path></g></svg></div>'),settingsMaximizeHandler=$('<button/>',{"data-tip":'Expand Modal',"class":'do-maximize-modalsettings et-fb-button et-fb-button--primary',"currentitem":'false'}).html('<div class="et-fb-icon et-fb-icon--expand" style="fill: rgb(255, 255, 255); width: 28px; min-width: 28px; height: 28px; margin: -6px;"><svg viewBox="0 0 28 28" preserveAspectRatio="xMidYMid meet" shape-rendering="geometricPrecision"><g><path d="M17 16L17 12C17 11.5 16.5 11 16 11L12 11C11.5 11 11 11.5 11 12L11 16C11 16.5 11.5 17 12 17L16 17C16.5 17 17 16.5 17 16L17 16ZM15 15L13 15 13 13 15 13 15 15 15 15Z" fill-rule="evenodd"></path><path d="M8.5 12C8.8 12 9 11.8 9 11.5L9 9 11.5 9C11.8 9 12 8.8 12 8.5 12 8.2 11.8 8 11.5 8L8.5 8C8.2 8 8 8.2 8 8.5L8 11.5C8 11.8 8.2 12 8.5 12L8.5 12Z" fill-rule="evenodd"></path><path d="M19.5 8L16.5 8C16.2 8 16 8.2 16 8.5 16 8.8 16.2 9 16.5 9L19 9 19 11.5C19 11.8 19.2 12 19.5 12 19.8 12 20 11.8 20 11.5L20 8.5C20 8.2 19.8 8 19.5 8L19.5 8Z" fill-rule="evenodd"></path><path d="M11.5 19L9 19 9 16.5C9 16.2 8.8 16 8.5 16 8.2 16 8 16.2 8 16.5L8 19.5C8 19.8 8.2 20 8.5 20L11.5 20C11.8 20 12 19.8 12 19.5 12 19.2 11.8 19 11.5 19L11.5 19Z" fill-rule="evenodd"></path><path d="M19.5 16C19.2 16 19 16.2 19 16.5L19 19 16.5 19C16.2 19 16 19.2 16 19.5 16 19.8 16.2 20 16.5 20L19.5 20C19.8 20 20 19.8 20 19.5L20 16.5C20 16.2 19.8 16 19.5 16L19.5 16Z" fill-rule="evenodd"></path></g></svg></div><canvas class="ink" height="0" width="0" style="border-radius: inherit; height: 200%; left: -50%; position: absolute; top: -50%; width: 200%;"></canvas></button>');settingsBodyTabs.appendTo(settingsWrapper);settingsBody.appendTo(settingsWrapper);settingsResizeHandler.appendTo(settingsWrapper);settingsHeader.append(settingsMinimizeHandler);settingsHeader.append(settingsMaximizeHandler);settingsMinimizeHandler.off();postBody.on('click touchstart','.do-minimize-modalsettings',function(evt){showBasicPreviews();windowMenuOptions('destroy');evt.preventDefault()});settingsMaximizeHandler.off();postBody.on('click touchstart','.do-maximize-modalsettings',function(evt){hideBasicPreviews();windowMenuOptions();evt.preventDefault()});$('.divilife_dl_navigation__button').on('click',function(e){e.preventDefault();var tabReference=$(this).attr('data-key'),tabReferenceId='dl-tab-'+tabReference;groupReference=tabReference;sublist_container.html('');openTabContent(e,tabReferenceId,"displaylocations-tabcontent","divilife_dl_navigation__button",'et-common-tabs-navigation__button--active')});function showDisplayLocationsLoading(groupName,groupLabel,grouplabelvalue){sublist_container_content_grouplist.html('');var content=sublist_container_content_grouplist.append(divilife_logo),headingLabel=sublist_container_content_grouplistlabel.attr('data-groupreference',grouplabelvalue).html(groupName+' > '+groupLabel);sublist_container_content.append(headingLabel);sublist_container.append(sublist_container_panel.append(sublist_container_scroll.append(sublist_container_content.append(content))));sublist_container.appendTo(displaylocations_subcontent)}function getResults(parent,search,page){var e=this,t=null,action='divioverlays_get_template_settings',state={search:"",loading:!1,results:[],page:1,reachedEnd:!1,compact:!0},getRequestData=function(){return{action:action,nonce:divioverlays_get_template_settings,parent:parent,search:state.search,page:state.page}},useResults=function(e){var t=state.results.concat($(e,"id").filter(function(e){return -1===state.results.indexOf(e)}));state.results=t;var labelGroupReference=sublist_container_content_grouplistlabel.attr('data-groupreference');if(labelGroupReference==parent){showResults(state.results,parent)}},useCachedResults=function(e){useResults(e);state.loading=!1},_requestResults=function(){state.loading=!0;var results=ms(getRequestData()).then(function(e){useResults(e.results)}).catch(function(error){console.log('The unknown error has occurred: ');console.log(error)}).then(function(){state.loading=!1})},_debouncedRequestResults=function(){setTimeout(_requestResults,250)},requestResults=function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];state.loading=!0;state.search=e;state.page=t;state.results=n?[]:state.results;var e=hs(getRequestData());return e?useCachedResults(e.results):_debouncedRequestResults()};requestResults(search,page)}function showResults(data,parent){var cList=$('<ul/>',{"class":'et-common-checkbox-group__list'}),noResults=$('<div/>',{"class":'et-tb-template-settings-sublist__no-results'}),noResultsParagraph=$('<p/>',{"class":'et-tb-template-settings-sublist__no-results','text':'No results found.'});noResults.append(noResultsParagraph);if(data[0].length){$.each(data[0],function(i,checkbox){var groupsetting_li=$('<li/>').addClass('et-tb-template-settings-group-setting').appendTo(cList);var groupsetting_setting__label=$('<div/>').addClass('et-tb-template-settings-group-setting__label').appendTo(groupsetting_li);var groupsetting_setting__label_checkbox=$('<label/>').addClass('et-common-checkbox').appendTo(groupsetting_setting__label);var inputRefChecked=false;if($('input[data-inputreference="'+groupReference+':'+checkbox.id+'"]').length){inputRefChecked=true}var excludefromclass='';if(groupReference==='excludefrom'){excludefromclass=' et-common-checkbox__input--danger'}var groupsetting_setting__label_checkbox_input=$('<input/>').addClass('et-common-checkbox__input'+excludefromclass).attr('value',checkbox.id).attr('type','checkbox').attr("checked",inputRefChecked).attr('data-parentreference',parent).attr('data-groupreference',groupReference).appendTo(groupsetting_setting__label_checkbox);var groupsetting_setting__label_checkbox_input_checkbox__label=$('<span/>').addClass('et-common-checkbox__label').appendTo(groupsetting_setting__label_checkbox);var groupsetting_setting__label_checkbox_input_checkbox__labelcontents=$('<span/>').addClass('et-common-checkbox-group__label-contents').appendTo(groupsetting_setting__label_checkbox_input_checkbox__label);var groupsetting_setting__label_checkbox_input_checkbox__labelmain=$('<span/>').addClass('et-common-checkbox-group__label-main').appendTo(groupsetting_setting__label_checkbox_input_checkbox__labelcontents).text(checkbox.label)});sublist_container_content_grouplist.html(cList)}else{sublist_container_content_grouplist.html(noResults)}}$(displaylocations_grouplabels).on('mouseenter',function(e){var pThis=$(this),grouplabelheadertext=pThis.parents('.et-tb-template-settings-group').find('.et-common-checkbox-group__label').html(),grouplabeltext=pThis.find('.et-common-checkbox-group__label-main').html(),grouplabelvalue=pThis.find('.et-common-checkbox__input').val();grouplabelvalue=grouplabelvalue.replace('useon:','');grouplabelvalue=grouplabelvalue.replace('excludefrom:','');showDisplayLocationsLoading(grouplabelheadertext,grouplabeltext,grouplabelvalue);getResults(grouplabelvalue,'',1)});postBody.on('click','.divilife_displaylocations .do-dloptions input[type="checkbox"]',function(e){var pThis=$(this),inputValue=pThis.val(),grouplabelvalue=inputValue.replace('useon:',''),grouplabelvalue=grouplabelvalue.replace('excludefrom:','');if(pThis.is(":checked")){e.preventDefault()}else{if($('input[data-groupreference="'+groupReference+'"]:checked').length){$('input[data-groupreference="'+groupReference+'"]:checked').prop("checked",false);$('input[data-inputreference^="'+inputValue+'"]').remove()}}});postBody.on('click','.et-tb-template-settings-group-setting.non-dloptions .et-common-checkbox__input, .divilife_displaylocations_subcontent .et-common-checkbox__input',function(e){var pThis=$(this);checkAddInputReference(pThis)});function checkAddInputReference(pThis){var inputValue=pThis.val(),inputValue=inputValue.replace('useon:',''),inputValue=inputValue.replace('excludefrom:',''),inputReference=groupReference+':'+inputValue,parentReferenceValue=pThis.attr('data-parentreference'),parentReference=$('input[value="'+groupReference+':'+parentReferenceValue+'"]');if(pThis.is(":checked")){if(parentReference.length){if(!parentReference.is(":checked")){parentReference.prop("checked",true)}}if(!$('input[data-inputreference="'+inputReference+'"]').length){uncheckSameOptionsOppositeTab(inputValue,parentReferenceValue);var input_reference=$('<input/>').addClass('do-hide').attr('data-inputreference',inputReference).attr('name','divilife_'+groupReference+'[]').attr('value',inputValue).appendTo(displaylocations_subcontent_dlvalues)}}else if(pThis.is(":checked")===false){if($('input[data-inputreference="'+inputReference+'"]').length){$('input[data-inputreference="'+inputReference+'"]').remove()}if(parentReference.length){if(!$('input[data-parentreference="'+parentReferenceValue+'"]:checked').length&&parentReference.is(":checked")){parentReference.prop("checked",false)}}}}function uncheckSameOptionsOppositeTab(inputValue,parentReferenceValue){var oppoGroupReference=groupReference==='useon'?'excludefrom':'useon',oppoParentReference=$('input[value="'+oppoGroupReference+':'+parentReferenceValue+'"]');if($('input[data-inputreference="'+oppoGroupReference+':'+inputValue+'"]').length){$('input[data-inputreference="'+oppoGroupReference+':'+inputValue+'"]').remove();if(!$('input[data-inputreference^="'+oppoGroupReference+':'+parentReferenceValue+'"]').length&&oppoParentReference.is(":checked")){oppoParentReference.prop("checked",false)}}}postBody.on('click','#divioverlay_postsettings .et-fb-form__toggle-title',function(e){e.preventDefault();e.stopPropagation();var click_area=$(this),tabWrap=click_area.parents('.do-tabcontent'),formtoggle=click_area.closest('.et-fb-form__toggle'),toggleContent=formtoggle.find('.dl-do-toggleContent'),formtoggleOpened=tabWrap.find('.et-fb-form__toggle.et-fb-form__toggle-enabled.et-fb-form__toggle-opened'),toggleContentOpened=formtoggleOpened.find('.dl-do-toggleContent');if(!formtoggle.hasClass('et-fb-form__toggle-opened')){formtoggle.toggleClass('et-fb-form__toggle-opened');toggleContent.toggle()}if(formtoggleOpened.length>0){toggleContentOpened.toggle();formtoggleOpened.removeClass('et-fb-form__toggle-opened')}});postBody.on('click','#divioverlay_postsettings .et-fb-settings-option-color-wrap--preview',function(e){var pThis=$(this);pThis.toggle();toggleClosestWpColorPicker(pThis)});function toggleClosestWpColorPicker(e){var wrapColorSettings=e.parents('.et-fb-settings-option-color--has-color-manager'),wpPickerContainer=wrapColorSettings.find('.wp-picker-container');wpPickerContainer.addClass('wp-picker-active');wpPickerContainer.find('input.wp-color-picker.color-picker').focus();if(!wrapColorSettings.hasClass(colorManagerPreviewCSSClass)){var wrapColorManager=wrapColorSettings.find('.et-fb-settings-option-color-wrap--manager'),colorPickerInput=wrapColorSettings.find('input.color-picker');wrapColorManager.toggle();postBody.on('mouseup.toggleWpPickerContainer touchend.toggleWpPickerContainer focusin.toggleWpPickerContainer',function(e){if(!wpPickerContainer.is(e.target)&&wpPickerContainer.has(e.target).length===0){var color=colorPickerInput.val();changeCurrentColorObj(wpPickerContainer,color);wpPickerContainer.removeClass('wp-picker-active');wrapColorManager.toggle();postBody.off('.toggleWpPickerContainer')}})}}var colorRegex={hex:/^#[a-f0-9]{3}([a-f0-9]{3})?$/i,rgb:/^rgba?\(\s*\d{1,3}\s*,\s*\d{1,3}\s*,\s*\d{1,3}\s*(,\s*[\d\.]+)?\s*\)$/,hsl:/^hsla?\(\s*\d{1,3}\s*,\s*\d{1,3}%\s*,\s*\d{1,3}%\s*(,\s*[\d\.]+)?\s*\)$/};var genHarColors_=[{h:15,s:20,l:20},{h:0,s:0,l:0},{h:-15,s:0,l:0},{h:-15,s:0,l:-30},{h:165,s:0,l:-20},{h:165,s:0,l:0},{h:180,s:0,l:0},{h:195,s:-20,l:20}];var genHarColors_g=[{h:0,s:0,l:100},{h:0,s:0,l:0},{h:0,s:0,l:14},{h:0,s:0,l:28},{h:0,s:0,l:42},{h:0,s:0,l:56},{h:0,s:0,l:70},{h:0,s:0,l:84}];var genHarColors_m=[{h:0,s:0,l:-100},{h:0,s:0,l:0},{h:0,s:0,l:-16},{h:0,s:0,l:-30},{h:0,s:0,l:-44},{h:0,s:0,l:-58},{h:0,s:0,l:-72},{h:0,s:0,l:-86}];function isHex(e){return colorRegex.hex.test(e)}function isRgb(e){return colorRegex.rgb.test(e)}function isHsl(e){return colorRegex.hsl.test(e)}postBody.on('click','#divioverlay_postsettings .'+colorPaletteCSSClass,function(e){var pThis=$(this);toggleColorPalette(pThis)});function toggleColorPalette(e,duration){if(typeof e==='undefined'){return false}var toggleClasses='et-fb-settings-color-manager--expanded et-fb-settings-color-manager--collapsed',trigger=e,parentWrap=trigger.parents('.et-fb-settings-color-manager');if(typeof duration==='undefined'){var duration=0}setTimeout(()=>{parentWrap.toggleClass(toggleClasses);if(!parentWrap.hasClass('et-fb-settings-color-manager--collapsed')){var colorManagerCurrentColor=parentWrap.find('.et-fb-settings-color-manager__current-color'),colorManagerSwatches=parentWrap.find('.et-fb-settings-color-manager__swatches'),colorManagerResetColor=parentWrap.find('.et-fb-settings-color-manager__reset-color');postBody.on('mouseup.toggleDiviLifeColorPalette touchend.toggleDiviLifeColorPalette focusin.toggleDiviLifeColorPalette',function(e){if((!colorManagerCurrentColor.is(e.target)&&colorManagerCurrentColor.has(e.target).length===0)&&(!colorManagerSwatches.is(e.target)&&colorManagerSwatches.has(e.target).length===0)&&(!colorManagerResetColor.is(e.target)&&colorManagerResetColor.has(e.target).length===0)){if(!trigger.is(e.target)&&trigger.has(e.target).length===0){parentWrap.toggleClass(toggleClasses)}postBody.off('.toggleDiviLifeColorPalette')}})}},duration)}function getColorType(colorReferenceValue){var colorType=false;$.each(colorRegex,function(index,regex){if(regex.test(colorReferenceValue)===true){colorType=index;return false}});return colorType}function isColorValid(colorReferenceValue){return getColorType(colorReferenceValue)};function getPalettes(){return dov_et_pb_color_palette.split('|')}function getRecentColors(){var e=wpCookies.get('et-pb-recent-items-color');if(e===null){return getPalettes()}if(e!==null){return e.split('|')}}function createPalette(){let recentColors=[''].concat(getRecentColors()),swatchesRotator=$('#divioverlay_postsettings .et-fb-settings-color-manager__swatches-rotator'),emptySwatchCSSClass='et-fb-settings-color-manager__swatches-swatch--empty';$.each(recentColors,function(index,e){let harmoniusColors=createHarmoniusColors(recentColors[index]),isEmpty=(recentColors[index]=='')?true:false,row=$('<div/>',{"class":'et-fb-settings-color-manager__swatches-row'});$.each(harmoniusColors,function(index,e){let swatch=$('<div/>',{"class":'et-fb-settings-color-manager__swatches-swatch'}),swatchOverlay=$('<div/>',{"class":'et-fb-settings-color-manager__swatches-swatch-overlay'}),colorRGB=(isEmpty)?'':hslToRgb(harmoniusColors[index][0],harmoniusColors[index][1],harmoniusColors[index][2]),color=(isEmpty)?'':rgbToHex(colorRGB[0],colorRGB[1],colorRGB[2]);swatch.attr('data-color',color);if(isEmpty){swatch.addClass(emptySwatchCSSClass)}if(!isEmpty){swatchOverlay.css('background-color','rgb('+colorRGB+')')}swatch.append(swatchOverlay);row.append(swatch)});swatchesRotator.append(row)})}createPalette();postBody.on('click','#divioverlay_postsettings .et-fb-settings-color-manager__swatches-swatch',function(e){var pThis=$(this),colorReferenceValue=pThis.attr('data-color'),rgb,color;if(isColorValid(colorReferenceValue)){colorReferenceValue=colorReferenceValue?colorReferenceValue.toLowerCase():'';rgb=colorToRGB(colorReferenceValue);color='rgb('+rgb[0]+', '+rgb[1]+', '+rgb[2]+')';changeCurrentColorObj(pThis,color);changeColorPickerColor(pThis,color);changeSwatchColorsFirstRow(pThis,color)}});function changeColorPickerColor(e,color){var wrapColorSettings=e.parents('.et-fb-settings-option-color--has-color-manager'),colorPickerInput=wrapColorSettings.find('input.color-picker'),colorPickerInputName=colorPickerInput.attr('name'),colorPickerInstance=wrapColorSettings.find('.iris-picker');colorPickerInput.prop('value',color).attr('value',color);$('input[name="'+colorPickerInputName+'"]').wpColorPicker('color',color);if(wrapColorSettings.hasClass(colorManagerPreviewCSSClass)){var colorPickerPreview=wrapColorSettings.find('.et-fb-settings-option-preview');colorPickerPreview.css('background-color',color)}}function changeSwatchColorsFirstRow(e,color){var wrapColumn=e.parents('.et-fb-settings-color-manager__column'),swatchesFirstRow=wrapColumn.find('.et-fb-settings-color-manager__swatches-row:first'),palette8=createHarmoniusColors(color),swatches=swatchesFirstRow.find('.et-fb-settings-color-manager__swatches-swatch').removeClass('et-fb-settings-color-manager__swatches-swatch--empty');$.each(swatches,function(index,e){var pThis=$(e),swatchBGcolor=pThis.find('.et-fb-settings-color-manager__swatches-swatch-overlay');let colorRGB=hslToRgb(palette8[index][0],palette8[index][1],palette8[index][2]);swatchBGcolor.css('background-color','rgb('+colorRGB+')');let color=rgbToHex(colorRGB[0],colorRGB[1],colorRGB[2]);pThis.attr('data-color',color)})}postBody.on('click','#divioverlay_postsettings .et-fb-settings-color-manager__reset-color',function(e){var pThis=$(this),color='rgba(0,0,0,0)';changeCurrentColorObj(pThis,color);changeColorPickerColor(pThis,color);changeSwatchColorsFirstRow(pThis,color)});function changeCurrentColorObj(pThis,color){var parentWrap=pThis.parents('.et-fb-settings-option-color--has-color-manager'),currentColorObjEmptyClass='et-fb-settings-color-manager__current-color-empty',currentColorWrapObj=parentWrap.find('.et-fb-settings-color-manager__current-color'),currentColorObj=parentWrap.find('.et-fb-settings-color-manager__current-color-overlay');if(currentColorWrapObj.hasClass(currentColorObjEmptyClass)){currentColorWrapObj.removeClass(currentColorObjEmptyClass)}currentColorObj.css('background-color',color)}var colorPickerInputs=$('#divioverlay_postsettings input.color-picker');$.each(colorPickerInputs,function(index,regex){var pThis=$(this),inputColor=pThis.val();if(inputColor!=''){changeCurrentColorObj(pThis,inputColor)}});postBody.on('click','#divioverlay_postsettings .et-fb-settings-color-manager__current-color',function(e){var pThis=$(this);toggleClosestWpColorPicker(pThis)});function createHarmoniusColors(colorReferenceValue){var harmoniousColors=[],hsl;if(isColorValid(colorReferenceValue)){hsl=getHslVal(colorReferenceValue);harmoniousColors=generateHarmoniousColors(hsl[0],hsl[1],hsl[2])}else{harmoniousColors=['','','','','','','','']}return harmoniousColors}function getHslVal(colorReferenceValue){var colorReferenceValueParsed=colorToRGB(colorReferenceValue);var hsl=rgbToHsl(colorReferenceValueParsed);return hsl}function colorToRGB(colorReferenceValue){var colorReferenceValueParsed=getColorType(colorReferenceValue)==='hex'?hexToRgb(colorReferenceValue):rgbExtract(colorReferenceValue);return colorReferenceValueParsed}function rgbExtract(e){var t=void 0;if(isRgb(e)){var n=e.replace(/^(rgb|rgba)\(/,'').replace(/\)$/,'').replace(/\s/g,'').split(',');t=[parseInt(n[0]),parseInt(n[1]),parseInt(n[2])];if(n.length===4){t.push(parseFloat(n[3]))}}return t}function rgbToHsl(e){var t=e[1],n=e[2],e=e[0];var o=e/255;var r=t/255;var a=n/255;var i=Math.max(o,r,a);var s=Math.min(o,r,a);var l=0;var u=0;var c=(i+s)/2;if(i!==s){var d=i-s;switch(((u=c>0.5?d/(2-i-s):d/(i+s)),i)){case o:l=(r-a)/d+(r<a?6:0);break;case r:l=(a-o)/d+2;break;case a:l=(o-r)/d+4}l*=0.6}return[Math.round(100*l),Math.round(100*u),Math.round(100*c)]}function _adjustHslValue(e,t,n){if(n<0){n+=1}if(n>1){n-=1}if(6*n<1){return t+6*(e-t)*n}else if(2*n<1){return e}else if(3*n<2){return t+(e-t)*(2/3-n)*6}else{return t}}function hslToRgb(e,t,n){var o=e/360;var r=t/100;var a=n/100;var i=a;var s=a;var l=a;if(r!==0){var u=a<0.5?a*(1+r):a+r-a*r;var c=2*a-u;i=_adjustHslValue(u,c,o+1/3);s=_adjustHslValue(u,c,o);l=_adjustHslValue(u,c,o-1/3)}return[Math.round(255*i),Math.round(255*s),Math.round(255*l)]}function hexToRgb(e){var t=void 0;var n=e.replace('#','');var o=new RegExp('(.{'+n.length/3+'})','g');n=n.match(o);if(n){for(var r=0;r<n.length;r+=1){var a=n[r].length===1?n[r]+n[r]:n[r];n[r]=parseInt(a,16)}t=n}return t}function rgbToHex(e,t,n){var o='0'+e.toString(16);var r='0'+t.toString(16);var a='0'+n.toString(16);return '#'+o.slice(-2)+r.slice(-2)+a.slice(-2)}function generateHarmoniousColors(e,t,n){var o=genHarColors_;var r=[];if(n===0){o=genHarColors_g}else if(n===100){o=genHarColors_m}$.each(o,function(index,o){var a=[(e+o.h)%360,Math.min(Math.max(t+o.s,0),100),Math.min(Math.max(n+o.l,0),100)];r.push(a)});return r}postBody.on('click','#divioverlay_postsettings .et-core-control-toggle',function(e){let pThis=$(this),toggleClasses='et-core-control-toggle--on et-core-control-toggle--off',toggleInputHidden=pThis.find('input[type="hidden"]'),toggleCheckBox=pThis.find('input[type="checkbox"]');pThis.toggleClass(toggleClasses);if(pThis.hasClass('et-core-control-toggle--on')){if(toggleInputHidden.length){toggleInputHidden.prop('value','1').trigger('change')}if(toggleCheckBox.length){toggleCheckBox.prop('checked',true)}}else if(pThis.hasClass('et-core-control-toggle--off')){if(toggleInputHidden.length){toggleInputHidden.prop('value','0').trigger('change')}if(toggleCheckBox.length){toggleCheckBox.prop('checked',false)}}});function setDefaultPropsOnIncrementalInputs(){var inputWithUnits=$('input[data-unit]');$.each(inputWithUnits,function(){var pInput=$(this),value=pInput.attr('value'),unit=getCSSUnit(value),defaultValue=pInput.attr('data-defaultvalue');if(defaultValue==value){pInput.attr('value','')}else{pInput.attr('data-unit',unit)}})}postBody.on('input','#divioverlay_postsettings .et-fb-range',function(e){var rangeInput=$(this),target=e.target,val=target.value,rangeNumInput=rangeInput.parent().find('.et-fb-settings-option-input');updateSliderRange(val,rangeNumInput,rangeInput);return true});postBody.on('click','#divioverlay_postsettings .et-fb-incrementor .increase, #divioverlay_postsettings .et-fb-incrementor .decrease',function(e){var pThis=$(this),isIncrease=pThis.hasClass('increase'),isDecrease=pThis.hasClass('decrease'),parentWrap=pThis.parents('.et-fb-settings-option-inputs-wrap'),rangeInput=parentWrap.find('.et-fb-range'),step=parseFloat(rangeInput.attr('step'),10),min=rangeInput.attr('min'),max=rangeInput.attr('max'),val=parseFloat(rangeInput.attr('value'),10),rangeNumInput=parentWrap.find('.et-fb-settings-option-input');if(isIncrease===true){val=val+step;if(val>max){val=max}}if(isDecrease===true){val=val-step;if(val<min){val=min}}updateSliderRange(val,rangeNumInput,rangeInput)});postBody.on('change','#divioverlay_postsettings .et-fb-settings-option-input, #divioverlay_postsettings .et-fb-settings-option-input input',function(e){var pThis=$(this),parentWrap=pThis.parents('.et-fb-settings-option-inputs-wrap'),rangeInput=parentWrap.find('.et-fb-range'),val=pThis.prop('value'),rangeNumInput=pThis;if(parentWrap.length>0&&rangeInput.length>0&&rangeNumInput.attr('type')==='text'){updateSliderRange(val,rangeNumInput,rangeInput)}});function updateSliderRange(val,rangeNumInput,rangeInput){var rangeInputValue='';if(val===''){var defaultValue=rangeNumInput.attr('data-defaultvalue');defaultValue=parseFloat(defaultValue,10);rangeInput.prop('value',defaultValue).attr('value',defaultValue);updateNumControlInput('',rangeNumInput);return}rangeInputValue=parseFloat(val,10);rangeInput.prop('value',rangeInputValue).attr('value',rangeInputValue);updateNumControlInput(val,rangeNumInput)}function updateNumControlInput(val,rangeNumInput){var inputValue,unit=rangeNumInput.attr('data-unit'),keepUnit=rangeNumInput.attr('data-keepunit'),rangeNumInputValue=rangeNumInput.attr('value'),defaultValue=rangeNumInput.attr('data-defaultvalue'),defaultUnit=getCSSUnit(defaultValue);if(val!==''){if(typeof unit!=='undefined'&&typeof rangeNumInputValue!=='undefined'&&rangeNumInputValue!==''&&!isNaN(val)===false&&typeof keepUnit==='undefined'){unit=getCSSUnit(val);if(unit===''){unit=defaultUnit}}if(typeof unit==='undefined'){unit=''}if(unit==='Days'){unit=' '+unit}val=parseFloat(val,10);inputValue=val+unit}else{inputValue=defaultValue}if(inputValue!=defaultValue){rangeNumInput.prop('value',inputValue).attr('value',inputValue);if(unit!==''){rangeNumInput.attr('data-unit',unit)}}else{rangeNumInput.prop('value','').attr('value','');if(unit!==''){rangeNumInput.attr('data-unit',defaultUnit)}}}function getCSSUnit(e){var e=e+'',t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:'',n=(typeof e==='undefined')?'':e,o=n.length,a='!important'.length;if(n===''){return ''}else{if(n.substr(0-a,a)==='!important'){o-=a;n=n.substr(0,o).trim()}var n4chars=n.substr(-4,4),n3chars=n.substr(-3,3),n2chars=n.substr(-2,2),n1char=n.substr(-1,1);if(n4chars==='vmin'||n4chars==='vmax'||n4chars==='Days'){return n4chars}else if(n3chars==='deg'||n3chars==='rem'){return n3chars}else if(n2chars==='em'||n2chars==='px'||n2chars==='cm'||n2chars==='mm'||n2chars==='in'||n2chars==='pt'||n2chars==='pc'||n2chars==='ex'||n2chars==='vh'||n2chars==='vw'||n2chars==='ms'){return n2chars}else if(n1char==='%'){return '%'}else{return t}}};$('#et_pb_divioverlay_effect_entrance').on('select2:select',function(e){var animation=e.params.data.id,demobox=$('.divioverlay-demo-box-entrance');if(isFbLivePreview()){demobox=etBfbAppFrame}if(animation==='fadeIn'){animation='dofadeIn'}demobox.addClass('animate__'+animation).one('animationend webkitAnimationEnd MSAnimationEnd oAnimationEnd',function(e){setTimeout(()=>{demobox.removeClass('animate__'+animation)},500)})});$('#et_pb_divioverlay_effect_exit').on('select2:select',function(e){var animation=e.params.data.id,demobox=$('.divioverlay-demo-box-exit');if(isFbLivePreview()){demobox=etBfbAppFrame}demobox.addClass('animate__'+animation).one('animationend webkitAnimationEnd MSAnimationEnd oAnimationEnd',function(e){setTimeout(()=>{demobox.removeClass('animate__'+animation)},500)})});postBody.on('input','#divioverlay_postsettings .et-fb-range.divilife-input-animatebox',function(e){var pThis=$(this);animateDemobox(pThis);return true});postBody.on('click','#divioverlay_postsettings .divilife-input-animatebox .et-fb-incrementor .increase, #divioverlay_postsettings .divilife-input-animatebox .et-fb-incrementor .decrease',function(e){var pThis=$(this);animateDemobox(pThis)});$('#divioverlay_postsettings .divilife-input-animatebox .et-fb-settings-option-input').change(function(){var pThis=$(this);animateDemobox(pThis)});function animateDemobox(e){var parentWrap=e.parents('.et-fb-settings-option-inputs-wrap'),rangeInput=parentWrap.find('.et-fb-range'),slidebarSelector=rangeInput.attr('data-slidebar'),demobox=$(rangeInput.attr('data-demobox')),animation=$(slidebarSelector).val(),val=parseFloat(rangeInput.attr('value'),10);if(isFbLivePreview()){demobox=etBfbAppFrame}if(animation==='fadeIn'){animation='dofadeIn'}demobox.css('animation-duration',val+'s');demobox.removeClass('animate__'+animation);setTimeout(()=>{demobox.addClass('animate__'+animation).one('animationend webkitAnimationEnd MSAnimationEnd oAnimationEnd',function(e){demobox.removeClass('animate__'+animation)})},150)}var overlayCloseContainer=$('<div/>',{"class":'overlay-close-container'}),overlayClose=$('<a/>',{"href":'javascript:;',"class":'overlay-close'}),overlayCloseSpan=$('<span/>',{"class":'custom_btn',"html":'×'});CustomClose=new CustomClose(_getAllValuesCustomClose());CustomClose.update();$('.doclosebtn-text-color').wpColorPicker({clear:function(){CustomClose.color='';CustomClose.update()},change:function(event,ui){var hexcolor=jQuery(this).wpColorPicker('color');CustomClose.color=hexcolor;CustomClose.update();updateDiviOverlaysStylesOnDiviBuilder($(this))}});$('.doclosebtn-bg-color').wpColorPicker({clear:function(){CustomClose.backgroundColor='';CustomClose.update()},change:function(event,ui){var hexcolor=jQuery(this).wpColorPicker('color');CustomClose.backgroundColor=hexcolor;CustomClose.update();updateDiviOverlaysStylesOnDiviBuilder($(this))}});$('.do-post_bg').wpColorPicker({change:function(event,ui){updateDiviOverlaysStylesOnDiviBuilder($(this))}});postBody.on('input','#divioverlay_postsettings .post_doclosebtn_fontsize',function(e){var pThis=$(e.target);customCloseBtnUpdate(pThis,'fontsize')});CustomClose.fontsize=$('input.post_doclosebtn_fontsize').attr('value');CustomClose.update();postBody.on('click','#divioverlay_postsettings .post_doclosebtn_fontsize .et-fb-incrementor .increase, #divioverlay_postsettings .post_doclosebtn_fontsize .et-fb-incrementor .decrease',function(){var pThis=$(this);customCloseBtnUpdate(pThis,'fontsize')});$('#divioverlay_postsettings .post_doclosebtn_fontsize .et-fb-settings-option-input').change(function(){var pThis=$(this);customCloseBtnUpdate(pThis,'fontsize')});postBody.on('input','#divioverlay_postsettings .post_doclosebtn_borderradius',function(e){var pThis=$(e.target);customCloseBtnUpdate(pThis,'borderRadius')});CustomClose.borderRadius=$('input.post_doclosebtn_borderradius').attr('value');CustomClose.update();postBody.on('click','#divioverlay_postsettings .post_doclosebtn_borderradius .et-fb-incrementor .increase, #divioverlay_postsettings .post_doclosebtn_borderradius .et-fb-incrementor .decrease',function(e){var pThis=$(this);customCloseBtnUpdate(pThis,'borderRadius')});$('#divioverlay_postsettings .post_doclosebtn_borderradius .et-fb-settings-option-input').change(function(){var pThis=$(this);customCloseBtnUpdate(pThis,'borderRadius')});postBody.on('input','#divioverlay_postsettings .post_doclosebtn_padding',function(e){var pThis=$(e.target);customCloseBtnUpdate(pThis,'padding')});CustomClose.padding=$('input.post_doclosebtn_padding').attr('value');CustomClose.update();postBody.on('click','#divioverlay_postsettings .post_doclosebtn_padding .et-fb-incrementor .increase, #divioverlay_postsettings .post_doclosebtn_padding .et-fb-incrementor .decrease',function(e){var pThis=$(this);customCloseBtnUpdate(pThis,'padding')});$('#divioverlay_postsettings .post_doclosebtn_padding .et-fb-settings-option-input').change(function(){var pThis=$(this);customCloseBtnUpdate(pThis,'padding')});function customCloseBtnUpdate(input,prop,val){if(typeof val==='undefined'){var parentWrap=input.parents('.et-fb-settings-option-inputs-wrap'),rangeNumInput=parentWrap.find('.et-fb-settings-option-input'),val=rangeNumInput.attr('value');if(val===''){val=rangeNumInput.attr('data-defaultvalue')}}CustomClose[prop]=val;CustomClose.update()}postBody.on('click','.do_ccbtn',function(event){let emptyTag=false,closeBtnCustomEnabledClass='custom_btn';if($(this).hasClass('et-core-control-toggle--on')){updateDiviOverlaysStylesOnDiviBuilder(tab_content_closebutton,emptyTag);overlayCloseSpan.addClass(closeBtnCustomEnabledClass)}else{emptyTag=true;updateDiviOverlaysStylesOnDiviBuilder(tab_content_closebutton,emptyTag);overlayCloseSpan.removeClass(closeBtnCustomEnabledClass)}});postBody.on('click','#divioverlay_postsettings .et-fb-multiple-checkbox label',function(e){var pThis=$(this),checkbox=pThis.find('input[type="checkbox"]');if(checkbox.is(':checked')){checkbox.prop('checked',false)}else{checkbox.prop('checked',true)}});postBody.on('click','.do_enable_toggle',function(event){let pThis=$(this),elemShowing=$(pThis.attr('data-divioverlay-elementshowing'));if($(this).hasClass('et-core-control-toggle--on')){elemShowing.addClass('do-show')}else{elemShowing.removeClass('do-show')}});function loadDiviOverlaysPostUI(){etBfbAppFrame=$("#et-bfb-app-frame");etBfbAppFrameHTML=etBfbAppFrame.contents().find('html');etBfbAppFrameBody=etBfbAppFrame.contents().find('body');etBfbAppFrameArticle=etBfbAppFrameHTML.find('body.divi_overlay-singletemplate.et-db.et-bfb > article:first-child, body.single-divi_overlay.et-db.et-bfb > article:first-child');etBfbAppFrameArticleInnerContent=etBfbAppFrameHTML.find('body.divi_overlay-singletemplate.et-db.et-bfb > article:first-child .et_builder_inner_content, body.single-divi_overlay.et-db.et-bfb article .et_builder_inner_content');etBfbAppFrame.addClass(css_animate);setDefaultPropsOnIncrementalInputs();addCloseButtonInDiviBuilder();postBody.on('click','#divioverlay_postsettings .closebtninoverlay .et-core-control-toggle',function(e){var pThis=$(this);if(pThis.hasClass('et-core-control-toggle--on')){overlayCloseContainer.appendTo(etBfbAppFrameArticleInnerContent)}else if(pThis.hasClass('et-core-control-toggle--off')){overlayCloseContainer.appendTo(etBfbAppFrameBody)}});postBody.on('click','.et-fb-button-group--responsive-mode button.et-fb-button',function(e){if(!$(this).has('.et-fb-icon--wireframe').length){hideBasicPreviews();windowMenuOptions()}else if($(this).has('.et-fb-icon--wireframe').length){showBasicPreviews();windowMenuOptions('destroy')}});postBody.on('click','#divioverlay_postsettings .et-fb-multiple-checkbox label',function(e){var pThis=$(this),checkbox=pThis.find('input[type="checkbox"]');if(checkbox.is(':checked')){checkbox.prop('checked',false)}else{checkbox.prop('checked',true)}});assignEventsInputsStylingDiviBuilder();updateDiviOverlaysStylesOnDiviBuilder(tab_content_background);if($('.do_ccbtn input[name="post_do_customizeclosebtn"]').is(':checked')){updateDiviOverlaysStylesOnDiviBuilder(tab_content_closebutton)}updateDiviOverlaysStylesOnDiviBuilder(tab_content_sizing);updateDiviOverlaysStylesOnDiviBuilder(tab_content_positioning);updatePositioningOrigin($('#do-tab-7 .et-fb-option--position[data-responsivemode="desktop"] .et-fb-settings-position-button-active'));updatePositioningOrigin($('#do-tab-7 .et-fb-option--position[data-responsivemode="tablet"] .et-fb-settings-position-button-active'));updatePositioningOrigin($('#do-tab-7 .et-fb-option--position[data-responsivemode="phone"] .et-fb-settings-position-button-active'));updateDiviOverlaysStylesOnDiviBuilder(tab_content_closebuttonpositioning);updatePositioningOrigin($('#do-tab-5 .et-fb-option--position[data-responsivemode="desktop"] .et-fb-settings-position-button-active'),tab_content_closebuttonpositioning_pointoforigin,'dov_closebtn_pointoforigin',false);updatePositioningOrigin($('#do-tab-5 .et-fb-option--position[data-responsivemode="tablet"] .et-fb-settings-position-button-active'),tab_content_closebuttonpositioning_pointoforigin,'dov_closebtn_pointoforigin',false);updatePositioningOrigin($('#do-tab-5 .et-fb-option--position[data-responsivemode="phone"] .et-fb-settings-position-button-active'),tab_content_closebuttonpositioning_pointoforigin,'dov_closebtn_pointoforigin',false)}function hideBasicPreviews(){let wrapColorSettings=$('#do-tab-1').find('.et-fb-settings-option-color--has-color-manager'),wpPickerContainer=wrapColorSettings.find('.wp-picker-container'),demoContainer=$('.divioverlay-demo-container');if(!demoContainer.hasClass('do-hide')){$('.divioverlay-demo-container').addClass('do-hide');$('.overlay-customclose-wrap').addClass('do-hide')}if(!wpPickerContainer.hasClass('wp-picker-active')){setTimeout(()=>{wpPickerContainer.addClass('wp-picker-active');wrapColorSettings.find('input.wp-color-picker.color-picker').focus();wrapColorSettings.find('.et-fb-settings-option-color-wrap--preview').addClass('do-hide');wrapColorSettings.find('.wp-picker-input-wrap').focus().click();wrapColorSettings.find('.wp-picker-input-wrap label').focus().click();wrapColorSettings.find('.wp-picker-input-wrap input').focus();wrapColorSettings.find('.wp-picker-input-wrap div').focus().click();wrapColorSettings.find('.wp-picker-input-wrap').focus().click();wrapColorSettings.find('.wp-picker-input-wrap label').focus().click();wrapColorSettings.find('.wp-picker-input-wrap input').focus();wrapColorSettings.find('.wp-picker-input-wrap div').focus().click();wrapColorSettings.find('.wp-picker-input-wrap').focus().click();wrapColorSettings.find('.wp-picker-input-wrap label').focus().click();wrapColorSettings.find('.wp-picker-input-wrap input').focus();wrapColorSettings.find('.wp-picker-input-wrap div').focus().click()},2000)}}function showBasicPreviews(){let demoContainer=$('.divioverlay-demo-container');if(demoContainer.hasClass('do-hide')){demoContainer.removeClass('do-hide');$('.overlay-customclose-wrap').removeClass('do-hide')}}function windowMenuOptions(status){let $activePanel=$('#divioverlay_postsettings .et-db #et-boc .et-l .et-fb-tabs__panel--active'),$minimizeBtn=$('.do-minimize-modalsettings'),$maximizeBtn=$('.do-maximize-modalsettings');if(typeof settingsWrapper.draggable('instance')!=='undefined'){settingsWrapper.draggable(status);if(status==='destroy'){$minimizeBtn.css('display','none');$maximizeBtn.css('display','block');settingsWrapper.css({'left':'','top':''});settingsBody.resizable(status);settingsBody.attr('data-doresizable-width',settingsBody.css('width'));settingsBody.attr('data-doresizable-height',settingsBody.css('height'));settingsBody.css({'width':'','height':''});$activePanel.css({'width':'','height':''});settingsWrapper.removeClass('do-modal-float')}}else{$minimizeBtn.css('display','block');$maximizeBtn.css('display','none');settingsWrapper.draggable({create:function(event,ui){$(this).css({'left':'99px','top':'60px'})}});let originalWidth=settingsBody.attr('data-doresizable-width'),originalHeight=settingsBody.attr('data-doresizable-height');if(typeof originalWidth!=='undefined'){settingsBody.css('width',originalWidth);$activePanel.css('width',originalWidth)}else{settingsBody.css('width','835px');$activePanel.css('width','835px')}if(typeof originalHeight!=='undefined'){settingsBody.css('height',originalHeight);$activePanel.css('height',originalHeight)}else{settingsBody.css('height','470px');$activePanel.css('height','470px')}settingsBody.resizable({handles:{se:$('#settingsBodyResizeHandler')},minHeight:300,minWidth:835,resize:function(event,ui){let $activePanel=$('#divioverlay_postsettings .et-db #et-boc .et-l .et-fb-tabs__panel--active');$activePanel.css('width',ui.size.width);$activePanel.css('height',ui.size.height)}});settingsWrapper.addClass('do-modal-float')}}function assignEventsInputsStylingDiviBuilder(){postBody.on('input','#divioverlay_postsettings .updateDiviOverlaysStylesOnDiviBuilder .et-fb-range',function(e){updateDiviOverlaysStylesOnDiviBuilder($(this))});postBody.on('click','#divioverlay_postsettings .updateDiviOverlaysStylesOnDiviBuilder .et-fb-incrementor .increase, #divioverlay_postsettings .updateDiviOverlaysStylesOnDiviBuilder .et-fb-incrementor .decrease',function(e){updateDiviOverlaysStylesOnDiviBuilder($(this))});$('#divioverlay_postsettings .updateDiviOverlaysStylesOnDiviBuilder .et-fb-settings-option-input').change(function(){updateDiviOverlaysStylesOnDiviBuilder($(this))});postBody.on('click','#divioverlay_postsettings .updateDiviOverlaysStylesOnDiviBuilder .et-core-control-toggle',function(e){updateDiviOverlaysStylesOnDiviBuilder($(this))})}function updateDiviOverlaysStylesOnDiviBuilder(elem,emptyTag){if(typeof etbfb_style_tags!=='undefined'){let cssSelector,classTag,onBuilder,extraStyles,styles='',the_styles='',toEtBfbAppFrameBody=etBfbAppFrameBody;let parentWrap=(typeof elem.attr('data-styletagclass')!=='undefined')?elem:elem.parents('[data-styletagclass]'),styleTagClass=parentWrap.attr('data-styletagclass');if(typeof styleTagClass==='undefined'){return}cssSelector=etbfb_style_tags[styleTagClass]['cssSelector'];classTag=etbfb_style_tags[styleTagClass]['classTag'];onBuilder=etbfb_style_tags[styleTagClass]['onBuilder'];extraStyles=etbfb_style_tags[styleTagClass]['extraStyles'];if(onBuilder===false){toEtBfbAppFrameBody=postHead}if(toEtBfbAppFrameBody.length){let diviOverlaysStyles=toEtBfbAppFrameBody.find('style.'+classTag);if(emptyTag!==true){let inputsUpdatingBuilder=parentWrap.find('input[data-updatebuilder="true"]');$.each(inputsUpdatingBuilder,function(index,e){let pThis=$(e),css=pThis.attr('data-css'),cssImportant=pThis.attr('data-cssimportant'),value=pThis.val(),responsiveMode=pThis.parents('[data-responsivemode]').attr('data-responsivemode');if(pThis.prop('type')==='checkbox'&&!pThis.is(':checked')){return}if(value==''){value=pThis.attr('placeholder')}the_styles=createCSSline(cssSelector,css,value,responsiveMode,cssImportant);styles=styles+the_styles['desktop'];styles=styles+the_styles['tablet'];styles=styles+the_styles['phone']});styles=styles+extraStyles}if(!diviOverlaysStyles.length){diviOverlaysStyles=$('<style/>',{"class":classTag});toEtBfbAppFrameBody.prepend(diviOverlaysStyles)}diviOverlaysStyles.html(styles)}}}function createCSSline(cssSelector,css,value,responsiveMode,cssImportant){if(typeof responsiveMode==='undefined'){responsiveMode=''}if(typeof cssImportant==='undefined'){cssImportant=' !important'}else if(cssImportant==''||cssImportant=='false'){cssImportant=''}let styles=[],styles_desktop='',styles_tablet='',styles_phone='',cssSelectorDiviTablet='.et-fb-preview--tablet ',cssSelectorDiviPhone='.et-fb-preview--phone ';if(responsiveMode=='tablet'){styles_tablet=cssSelectorDiviTablet+cssSelector+'{'+css+':'+value+cssImportant+'; }'}else if(responsiveMode=='phone'){styles_phone=cssSelectorDiviPhone+cssSelector+'{'+css+':'+value+cssImportant+'; }'}else{styles_desktop=cssSelector+'{'+css+':'+value+cssImportant+'; }'}styles['desktop']=styles_desktop;styles['tablet']=styles_tablet;styles['phone']=styles_phone;return styles}function getDiviResponsiveTabletWidth(){let width=0;if(typeof etBfbAppFrame.get==="function"){width=etBfbAppFrame.get(0).contentWindow.ETBuilderBackend.appPreferences.responsive_tablet_width.value}return width}function getDiviResponsivePhoneWidth(){let width=0;if(typeof etBfbAppFrame.get==="function"){width=etBfbAppFrame.get(0).contentWindow.ETBuilderBackend.appPreferences.responsive_phone_width.value}return width}function getDiviResponsiveMaximumWidth(){let width=0;if(typeof etBfbAppFrame.get==="function"){width=etBfbAppFrame.get(0).contentWindow.ETBuilderBackend.appPreferences.responsive_maximum_width.value;width=parseFloat(width,10)+1}return width}function addCloseButtonInDiviBuilder(){overlayCloseContainer.append(overlayClose.append(overlayCloseSpan));if($('.et-fb-option--yes-no_button.closebtninoverlay .et-core-control-toggle').hasClass('et-core-control-toggle--on')){etBfbAppFrameArticleInnerContent.prepend(overlayCloseContainer)}else{etBfbAppFrameBody.prepend(overlayCloseContainer)}}function getFbPreview(){if(etBfbAppFrameHTML.length){if(etBfbAppFrameHTML.hasClass('et-fb-preview--wireframe')){return 'wireframe'}else if(etBfbAppFrameHTML.hasClass('et-fb-preview--desktop')){return 'desktop'}else if(etBfbAppFrameHTML.hasClass('et-fb-preview--tablet')){return 'tablet'}else if(etBfbAppFrameHTML.hasClass('et-fb-preview--phone')){return 'phone'}}}function isFbLivePreview(){let fbPreview=getFbPreview();if(fbPreview!=='wireframe'){return true}else{return false}}postBody.on('click','#divioverlay_postsettings #do-tab-7 .et-fb-settings-position-container .et-fb-settings-position-button',function(event){let pThis=$(this);updatePositioningOrigin(pThis)});postBody.on('click','#divioverlay_postsettings #do-tab-5 .et-fb-settings-position-container .et-fb-settings-position-button',function(event){let pThis=$(this);updatePositioningOrigin(pThis,tab_content_closebuttonpositioning_pointoforigin,'dov_closebtn_pointoforigin',false)});function updatePositionButtonGuide(e,positionWrapper){let positionOfOriginValue=e.val(),cssClassActive='et-fb-settings-position-button-active',cssClassNonActive='et-fb-settings-position-button',classesToggle=cssClassActive+' '+cssClassNonActive,buttonGuide=positionWrapper.find('[data-origin_type="'+positionOfOriginValue+'"]');positionWrapper.find('.'+cssClassActive).toggleClass(classesToggle);buttonGuide.toggleClass(classesToggle)}function updatePositioningOrigin(e,tab_content,inputNameRef,margins){if(typeof tab_content==='undefined'){tab_content=tab_content_positioning_pointoforigin}if(typeof inputNameRef==='undefined'){inputNameRef='dov_pointoforigin'}if(typeof margins==='undefined'){margins=true}let settingPositionActiveBtn=e,originType=settingPositionActiveBtn.attr('data-origin_type'),positionWrapper=settingPositionActiveBtn.parents('.et-fb-option--position'),positionOfOrigin=positionWrapper.find('input[name^="'+inputNameRef+'"]'),inputMarginLeft,inputMarginRight,inputPaddingTop,inputPaddingBottom;if(margins===true){inputMarginLeft=positionWrapper.find('input[name^="'+inputNameRef+'_marginleft"]'),inputMarginRight=positionWrapper.find('input[name^="'+inputNameRef+'_marginright"]'),inputPaddingTop=positionWrapper.find('input[name^="'+inputNameRef+'_paddingtop"]'),inputPaddingBottom=positionWrapper.find('input[name^="'+inputNameRef+'_paddingbottom"]')}positionOfOrigin.prop('value',originType).attr('value',originType);updatePositionButtonGuide(positionOfOrigin,positionWrapper);if(originType==='top_left'){if(margins===true){inputMarginLeft.prop('value','20px').attr('value','20px');inputMarginRight.prop('value','auto').attr('value','auto');inputPaddingTop.prop('value','10px').attr('value','10px');inputPaddingBottom.prop('value','80px').attr('value','80px')}}if(originType==='top_center'){if(margins===true){inputMarginLeft.prop('value','auto').attr('value','auto');inputMarginRight.prop('value','auto').attr('value','auto');inputPaddingTop.prop('value','10px').attr('value','10px');inputPaddingBottom.prop('value','80px').attr('value','80px')}}if(originType==='top_right'){if(margins===true){inputMarginLeft.prop('value','auto').attr('value','auto');inputMarginRight.prop('value','20px').attr('value','20px');inputPaddingTop.prop('value','10px').attr('value','0px');inputPaddingBottom.prop('value','80px').attr('value','80px')}}if(originType==='center_left'){if(margins===true){inputMarginLeft.prop('value','20px').attr('value','20px');inputMarginRight.prop('value','auto').attr('value','auto');inputPaddingTop.prop('value','60px').attr('value','60px');inputPaddingBottom.prop('value','60px').attr('value','60px')}}if(originType==='center_center'){if(margins===true){inputMarginLeft.prop('value','auto').attr('value','auto');inputMarginRight.prop('value','auto').attr('value','auto');inputPaddingTop.prop('value','60px').attr('value','60px');inputPaddingBottom.prop('value','60px').attr('value','60px')}}if(originType==='center_right'){if(margins===true){inputMarginLeft.prop('value','auto').attr('value','auto');inputMarginRight.prop('value','20px').attr('value','20px');inputPaddingTop.prop('value','60px').attr('value','60px');inputPaddingBottom.prop('value','60px').attr('value','60px')}}if(originType==='bottom_left'){if(margins===true){inputMarginLeft.prop('value','20px').attr('value','20px');inputMarginRight.prop('value','auto').attr('value','auto');inputPaddingTop.prop('value','70px').attr('value','70px');inputPaddingBottom.prop('value','0px').attr('value','0px')}}if(originType==='bottom_center'){if(margins===true){inputMarginLeft.prop('value','auto').attr('value','auto');inputMarginRight.prop('value','auto').attr('value','auto');inputPaddingTop.prop('value','70px').attr('value','70px');inputPaddingBottom.prop('value','0px').attr('value','0px')}}if(originType==='bottom_right'){if(margins===true){inputMarginLeft.prop('value','auto').attr('value','auto');inputMarginRight.prop('value','20px').attr('value','20px');inputPaddingTop.prop('value','70px').attr('value','70px');inputPaddingBottom.prop('value','0px').attr('value','0px')}}if(margins===true){updateDiviOverlaysStylesOnDiviBuilder(tab_content)}else{overlayCloseContainer.attr('data-origintype',originType)}}postBody.on('click','.dov-style-devices-settings [data-index="desktop"], .dov-style-devices-settings [data-index="tablet"], .dov-style-devices-settings [data-index="phone"]',function(e){e.preventDefault();let pThis=$(this),isActive=pThis.hasClass(cssSelectorActiveFbSettingsTabTitle);if(!isActive){let indexRef=pThis.attr('data-index'),wrap=pThis.parents('.dov-style-devices-settings'),diviPageViewSetting=$('.et-fb-page-settings-bar .et-fb-icon--'+indexRef);wrap.find('.et-fb-settings-tab-title').removeClass(cssSelectorActiveFbSettingsTabTitle);pThis.addClass(cssSelectorActiveFbSettingsTabTitle);if(isFbLivePreview()){diviPageViewSetting.closest("button").click()}changeActiveStyleDeviceSetting(indexRef);updatePositioningOrigin($('#do-tab-5 .et-fb-option--position[data-responsivemode="'+indexRef+'"] .et-fb-settings-position-button-active'),tab_content_closebuttonpositioning_pointoforigin,'dov_closebtn_pointoforigin',false)}});postBody.on('click','.et-fb-page-settings-bar .et-fb-button-group--responsive-mode .et-fb-button',function(e){let pThis=$(this),iconBtnSelector='.et-fb-icon',iconBtn=pThis.find(iconBtnSelector),iconBtnClass=iconBtn.attr('class'),iconBtnClassMode=iconBtnClass.replace(iconBtnSelector.replace('.',''),'').trim(),allResponsiveBtns=$('#divioverlay_postsettings .dov-style-devices-settings .et-fb-settings-tab-title'),specificResponsiveBtns=$('#divioverlay_postsettings .'+iconBtnClassMode);if(iconBtnClassMode!=='et-fb-icon--wireframe'){allResponsiveBtns.removeClass(cssSelectorActiveFbSettingsTabTitle);specificResponsiveBtns.closest('button').addClass(cssSelectorActiveFbSettingsTabTitle);let styleDevicesSettings=$('#divioverlay_postsettings .et-db #et-boc .et-l .dov-style-devices-settings .et-fb-settings-tab-title-active:first'),indexRef=styleDevicesSettings.attr('data-index');setTimeout(()=>{changeActiveStyleDeviceSetting(indexRef);updatePositioningOrigin($('#do-tab-5 .et-fb-option--position[data-responsivemode="'+indexRef+'"] .et-fb-settings-position-button-active'),tab_content_closebuttonpositioning_pointoforigin,'dov_closebtn_pointoforigin',false)},1)}});function changeActiveStyleDeviceSetting(indexRef){$('#divioverlay_postsettings .et-db #et-boc .et-l [data-responsivemode]').addClass('do-hide');$('#divioverlay_postsettings .et-db #et-boc .et-l [data-responsivemode="'+indexRef+'"]').removeClass('do-hide')}postBody.on('click','#divioverlay_postsettings .et-fb-settings-transform-wrapper .et-fb-settings-transform-linked',function(e){e.preventDefault();let pThis=$(this),cssClassLinked='et-fb-icon--linked',cssClassUnlinked='et-fb-icon--unlinked',classesToggle=cssClassLinked+' '+cssClassUnlinked,icon=pThis.find('.et-fb-icon'),linkSVG='<svg viewBox="0 0 28 28" preserveAspectRatio="xMidYMid meet" shape-rendering="geometricPrecision"><g><path d="M8 14a1 1 0 0 1 0 2h-.5A2.5 2.5 0 0 1 5 13.5v-2A2.5 2.5 0 0 1 7.5 9h8a2.5 2.5 0 0 1 2.5 2.5v2a2.5 2.5 0 0 1-2.5 2.5H15a1 1 0 0 1 0-2h.5a.5.5 0 0 0 .5-.5v-2a.5.5 0 0 0-.5-.5h-8a.5.5 0 0 0-.5.5v2a.5.5 0 0 0 .5.5z" fill-rule="evenodd"></path><path d="M20 14a1 1 0 0 1 0-2h.5a2.5 2.5 0 0 1 2.5 2.5v2a2.5 2.5 0 0 1-2.5 2.5h-8a2.5 2.5 0 0 1-2.5-2.5v-2a2.5 2.5 0 0 1 2.5-2.5h.5a1 1 0 0 1 0 2h-.5a.5.5 0 0 0-.5.5v2a.5.5 0 0 0 .5.5h8a.5.5 0 0 0 .5-.5v-2a.5.5 0 0 0-.5-.5z" fill-rule="evenodd"></path></g></svg>',unlinkSVG='<svg viewBox="0 0 28 28" preserveAspectRatio="xMidYMid meet" shape-rendering="geometricPrecision"><g><path d="M16.75 9.14a1 1 0 0 1 .37 1.39l-4.5 8a1 1 0 0 1-1.37.37 1 1 0 0 1-.37-1.39l4.5-8a1 1 0 0 1 1.37-.37zM19.71 10H20a3 3 0 0 1 3 3v2a3 3 0 0 1-3 3h-4.81l1.13-2H20a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1h-1.42zM12.81 10l-1.13 2H8a1 1 0 0 0-1 1v2a1 1 0 0 0 1 1h1.42l-1.13 2H8a3 3 0 0 1-3-3v-2a3 3 0 0 1 3-3z" fill-rule="evenodd"></path></g></svg>';icon.toggleClass(classesToggle);if(icon.hasClass(cssClassLinked)){icon.html(linkSVG)}else if(icon.hasClass(cssClassUnlinked)){icon.html(unlinkSVG)}});$("#divioverlay_postsettings .et-fb-form__group").hover(function(){$(this).find('.et-fb-form__label .et-fb-form__responsive').animate({opacity:1,marginLeft:"7px"},200,"swing",function(){})},function(){$(this).find('.et-fb-form__label .et-fb-form__responsive').animate({opacity:0,marginLeft:"20px"},200,"swing",function(){})});postBody.on('click','#divioverlay_postsettings .et-fb-form__group .et-fb-form__label .et-fb-form__responsive',function(e){let pThis=$(this),classToggleActive='et-fb-form__responsive--active',deviceSettings=pThis.parent().parent().find('.dov-style-devices-settings'),classToggleDeviceSettings='do-hide';pThis.toggleClass(classToggleActive);deviceSettings.toggleClass(classToggleDeviceSettings)});var displayConditions,displayConditionsCondition,displayConditionsConditionGroup,displayConditionsConditionId,displayConditionsConditionName,conditionsWrapperSelector='.divioverlays-display-conditions',miniOverlaySelector='.divilife-minioverlay',miniOverlayBackgroundSelector='.divilife-minioverlay-background',miniOverlayBackground=$(miniOverlayBackgroundSelector),miniOverlayDefaultHeight='500',fbSettingsSelectWrapperSelector='.et-fb-settings-custom-select-wrapper',fbSettingsSelectWrapper=$(fbSettingsSelectWrapperSelector),fbSettingsOptionsSelect=$('<ul/>',{"class":'et-fb-settings-option-select et-fb-allow-mouse-wheel et-fb-settings-option-select-advanced et-fb-display-condition-list',"role":'display-conditions-list'}),fbSettingsSelectOption='.select-option-item',fbSettingsSelectOptionHover='select-option-item-hovered',conditions={},conditionsi18n={},displayConditionsSelectOptions='',selectConditionsContent='',conditionsContent={},modalConditionsWrapper='',modalConditionsDefaultFields='',saveConditions={},miniOverlay,miniOverlaySettingsOptionClosed='et-fb-settings-option-select-closed',miniOverlaySettingsOptionActive='et-fb-settings-option-select-active',miniOverlayClassSelectorGroupedOptions='et-fb-settings-option-select-grouped-options',miniOverlayOptionSelectAdvancedPlaceholder=$('<div/>',{"class":'et-fb-settings-option-select-advanced-placeholder'}),miniOverlayModalContainer=$('<div/>',{"class":'et-fb-field-settings-modal__container'}),miniOverlayModalScroll=$('<div/>',{"class":'et-fb-field-settings-modal__scroll'}),miniOverlayModalScrollWrapper=$('<div/>'),miniOverlayModalContentCSSClass='et-fb-field-settings-modal__content',miniOverlayModalContent=$('<div/>',{"class":miniOverlayModalContentCSSClass}),miniOverlayModalContentForm=$('<form/>',{"class":'et-fb-field-settings-modal__content-form'}),miniOverlayModalButtonGroup=$('<div/>',{"class":'et-fb-button-group et-fb-button-group--block'}),miniOverlayModalButtonDiscard=$('<button/>',{"class":'et-fb-button et-fb-button--block et-fb-button--danger',"data-tip":'Discard All Changes'}).html('<div class="et-fb-icon et-fb-icon--exit" style="fill: rgb(255, 255, 255); width: 28px; min-width: 28px; height: 28px; margin: -6px;"><svg viewBox="0 0 28 28" preserveAspectRatio="xMidYMid meet" shape-rendering="geometricPrecision"><g><path d="M19.71 16.857l-2.85-2.854 2.85-2.854c.39-.395.39-1.03 0-1.426l-1.43-1.427a1 1 0 0 0-1.42 0L14 11.15l-2.85-2.854a1.013 1.013 0 0 0-1.43 0L8.3 9.723a1 1 0 0 0 0 1.426l2.85 2.854-2.85 2.853a1 1 0 0 0 0 1.427l1.42 1.427a1.011 1.011 0 0 0 1.43 0L14 16.856l2.86 2.854a1 1 0 0 0 1.42 0l1.43-1.427c.39-.395.39-1.03 0-1.426z" fill-rule="evenodd"></path></g></svg></div><canvas style="border-radius: inherit; height: 200%; left: -50%; position: absolute; top: -50%; width: 200%;" width="0" height="0"></canvas>'),miniOverlayModalButtonSave=$('<button/>',{"class":'et-fb-button et-fb-button--block et-fb-button--success',"data-tip":'Save Changes'}).html('<div class="et-fb-icon et-fb-icon--check" style="fill: rgb(255, 255, 255); width: 28px; min-width: 28px; height: 28px; margin: -6px;"><svg viewBox="0 0 28 28" preserveAspectRatio="xMidYMid meet" shape-rendering="geometricPrecision"><g><path d="M19.203 9.21a.677.677 0 0 0-.98 0l-5.71 5.9-2.85-2.95a.675.675 0 0 0-.98 0l-1.48 1.523a.737.737 0 0 0 0 1.015l4.82 4.979a.677.677 0 0 0 .98 0l7.68-7.927a.737.737 0 0 0 0-1.015l-1.48-1.525z" fill-rule="evenodd"></path></g></svg></div><canvas style="border-radius: inherit; height: 200%; left: -50%; position: absolute; top: -50%; width: 200%;" width="0" height="0"></canvas>'),selectOptionAdvancedChecked='<div class="et-fb-icon et-fb-icon--check" style="fill: rgb(55, 196, 170); width: 28px; min-width: 28px; height: 28px; margin: -6px;"><svg viewBox="0 0 28 28" preserveAspectRatio="xMidYMid meet" shape-rendering="geometricPrecision"><g><path d="M19.203 9.21a.677.677 0 0 0-.98 0l-5.71 5.9-2.85-2.95a.675.675 0 0 0-.98 0l-1.48 1.523a.737.737 0 0 0 0 1.015l4.82 4.979a.677.677 0 0 0 .98 0l7.68-7.927a.737.737 0 0 0 0-1.015l-1.48-1.525z" fill-rule="evenodd"></path></g></svg></div>',displayConditionsRowsSelector='.divioverlays-display-conditions .et-fb-settings-sortable-rows',displayConditionsRows=$(displayConditionsRowsSelector),displayConditionsRowsSortable='',displayConditionsRowsEditBtnSelector='.et-fb-settings-module-item-button--edit',displayConditionsRowsCopyBtnSelector='.et-fb-settings-module-item-button--copy',displayConditionsRowsDeleteBtnSelector='.et-fb-settings-module-item-button--delete',conditionsRowsBtnEdit=$('<button/>',{"class":'et-fb-button et-fb-button--small et-fb-settings-module-item-button et-fb-settings-module-item-button--edit'}).html('<div class="et-fb-icon et-fb-icon--setting" style="fill: rgb(115, 126, 137); width: 28px; min-width: 28px; height: 28px; margin: -6px;"><svg viewBox="0 0 28 28" preserveAspectRatio="xMidYMid meet" shape-rendering="geometricPrecision"><g><path d="M20.426 13.088l-1.383-.362a.874.874 0 0 1-.589-.514l-.043-.107a.871.871 0 0 1 .053-.779l.721-1.234a.766.766 0 0 0-.116-.917 6.682 6.682 0 0 0-.252-.253.768.768 0 0 0-.917-.116l-1.234.722a.877.877 0 0 1-.779.053l-.107-.044a.87.87 0 0 1-.513-.587l-.362-1.383a.767.767 0 0 0-.73-.567h-.358a.768.768 0 0 0-.73.567l-.362 1.383a.878.878 0 0 1-.513.589l-.107.044a.875.875 0 0 1-.778-.054l-1.234-.722a.769.769 0 0 0-.918.117c-.086.082-.17.166-.253.253a.766.766 0 0 0-.115.916l.721 1.234a.87.87 0 0 1 .053.779l-.043.106a.874.874 0 0 1-.589.514l-1.382.362a.766.766 0 0 0-.567.731v.357a.766.766 0 0 0 .567.731l1.383.362c.266.07.483.26.588.513l.043.107a.87.87 0 0 1-.053.779l-.721 1.233a.767.767 0 0 0 .115.917c.083.087.167.171.253.253a.77.77 0 0 0 .918.116l1.234-.721a.87.87 0 0 1 .779-.054l.107.044a.878.878 0 0 1 .513.589l.362 1.383a.77.77 0 0 0 .731.567h.356a.766.766 0 0 0 .73-.567l.362-1.383a.878.878 0 0 1 .515-.589l.107-.044a.875.875 0 0 1 .778.054l1.234.721c.297.17.672.123.917-.117.087-.082.171-.166.253-.253a.766.766 0 0 0 .116-.917l-.721-1.234a.874.874 0 0 1-.054-.779l.044-.107a.88.88 0 0 1 .589-.513l1.383-.362a.77.77 0 0 0 .567-.731v-.357a.772.772 0 0 0-.569-.724v-.005zm-6.43 3.9a2.986 2.986 0 1 1 2.985-2.986 3 3 0 0 1-2.985 2.987v-.001z" fill-rule="evenodd"></path></g></svg></div>'),conditionsRowsBtnCopy=$('<button/>',{"class":'et-fb-button et-fb-button--small et-fb-settings-module-item-button et-fb-settings-module-item-button--copy'}).html('<div class="et-fb-icon et-fb-icon--copy" style="fill: rgb(115, 126, 137); width: 28px; min-width: 28px; height: 28px; margin: -6px;"><svg viewBox="0 0 28 28" preserveAspectRatio="xMidYMid meet" shape-rendering="geometricPrecision"><g><path d="M16.919 15.391c.05-.124.074-.257.072-.39v-6a1.02 1.02 0 0 0-.072-.389.969.969 0 0 0-.893-.612H7.969a.97.97 0 0 0-.893.611c-.05.124-.076.256-.076.39v6c0 .134.026.266.076.39.146.365.5.604.893.605h8.057a.968.968 0 0 0 .893-.605zm3.074-3.413a1 1 0 0 0-1 1v5.011h-7.008a1 1 0 1 0 0 2h8a1 1 0 0 0 1-1v-6.013a1 1 0 0 0-.992-.998zm-5.016 2.013H8.991v-3.988h5.986v3.993-.005z" fill-rule="evenodd"></path></g></svg></div>'),conditionsRowsBtnDelete=$('<button/>',{"class":'et-fb-button et-fb-button--small et-fb-settings-module-item-button et-fb-settings-module-item-button--delete',"style":'right:5px;'}).html('<div class="et-fb-icon et-fb-icon--delete" style="fill: rgb(115, 126, 137); width: 28px; min-width: 28px; height: 28px; margin: -6px;"><svg viewBox="0 0 28 28" preserveAspectRatio="xMidYMid meet" shape-rendering="geometricPrecision"><g><path d="M19 9h-3V8a1 1 0 0 0-1-1h-2a1 1 0 0 0-1 1v1H9a1 1 0 1 0 0 2h10a1 1 0 0 0 .004-2H19zM9 20c.021.543.457.979 1 1h8c.55-.004.996-.45 1-1v-7H9v7zm2.02-4.985h2v4h-2v-4zm4 0h2v4h-2v-4z" fill-rule="evenodd"></path></g></svg></div>'),conditionsRowsWrapper=$('<div/>').attr('draggable','true'),conditionsRowsItemSelector='et-fb-display-conditions-item',conditionsRowsItem=$('<li/>',{"class":conditionsRowsItemSelector}),conditionsRowsItemTitleSelector='et-fb-settings-module-item-title',conditionsRowsItemTitle=$('<span/>',{"class":conditionsRowsItemTitleSelector}),inputDisplayConditionsJSON=$('input[name="dov_displayConditionsJSON"]'),thedatetimepicker,featureConditions;function getDateTimePicker(showTimeSelect,value){if(typeof showTimeSelect==='undefined'){showTimeSelect=false}if(typeof value==='undefined'){value=(new Date).getTime()}let divToAttach=$('<div/>',{"class":'et-fb-settings-option-input-datetime'}).prop('outerHTML'),config={showButtonPanel:!1,dateFormat:"yy-mm-dd",onSelect:function(dateTimeValue,dateTimeObj){let input=$(this).parent().find('.et-fb-option--date-picker-inputvalue');input.val(dateTimeValue)}};setTimeout(()=>{divToAttach=$('.divioverlays-display-conditions .et-fb-settings-option-input-datetime');showTimeSelect?(divToAttach.datetimepicker(config),divToAttach.datetimepicker('setDate',value)):(divToAttach.datepicker(config),divToAttach.datepicker('setDate',value))},50);return divToAttach}if(divioverlays_displayconditions!==''){displayConditions=JSON.parse(divioverlays_displayconditions);$.each(displayConditions,function(idx,conditionData){saveConditions[conditionData.id]=conditionData;addEditConditionsRow(conditionData.id)})}if(displayConditionsRows.find('div[draggable="true"]').length>0){displayConditionsSortable()}function displayConditionsSortable(){if(displayConditionsRowsSortable===''){displayConditionsRowsSortable=$(displayConditionsRows).sortable({scroll:false,containment:'.et-fb-settings-sortable-rows',items:'> div[draggable="true"]'})}else{displayConditionsRowsSortable.sortable("refresh")}}$('body '+displayConditionsRowsSelector).on("sortupdate sortreceive",function(event,ui){displayConditionsUpdateSubmitJSON()});function updateDisplayConditionsTableHeight(button){let displayConditionsRowsTotalHeight=displayConditionsRows.height(),displayConditionsRowsMinHeight=parseInt(displayConditionsRows.css('min-height')),displayConditionsRowsDraggableRow=displayConditionsRows.find('div[draggable="true"]'),displayConditionsRowsDraggableRowHeight=0,addCustomHeight=0;if(typeof button==='undefined'){button=true}if(button===true||button.is(displayConditionsRowsCopyBtnSelector)){displayConditionsRowsTotalHeight=displayConditionsRowsTotalHeight+addCustomHeight;if(displayConditionsRowsTotalHeight!==displayConditionsRowsMinHeight){displayConditionsRowsTotalHeight=displayConditionsRowsTotalHeight+addCustomHeight;displayConditionsRows.css('min-height',displayConditionsRowsTotalHeight+'px')}}else if(button.is(displayConditionsRowsDeleteBtnSelector)){displayConditionsRowsTotalHeight=displayConditionsRowsTotalHeight-addCustomHeight;if(displayConditionsRowsDraggableRow.length>0){displayConditionsRowsDraggableRowHeight=displayConditionsRowsDraggableRow.height();displayConditionsRowsTotalHeight=displayConditionsRowsTotalHeight-displayConditionsRowsDraggableRowHeight}displayConditionsRows.css('min-height',displayConditionsRowsTotalHeight+'px')}}postBody.on('click touch tap',displayConditionsRowsSelector+' '+displayConditionsRowsCopyBtnSelector,function(e){let pThis=$(this),thisCondition=pThis.parent().parent(),thisConditionId=thisCondition.attr('data-conditionid'),thisConditionType=thisCondition.attr('data-condition'),newConditionRowId=getRandomConditionRowId(thisConditionType),newCondition=Object.assign({},saveConditions[thisConditionId]);saveConditions[newConditionRowId]=newCondition;saveConditions[newConditionRowId]['id']=newConditionRowId;addEditConditionsRow(newConditionRowId)});postBody.on('click touch tap',displayConditionsRowsSelector+' '+displayConditionsRowsDeleteBtnSelector,function(e){let pThis=$(this),thisCondition=pThis.parent().parent(),thisConditionId=thisCondition.attr('data-conditionid');delete saveConditions[thisConditionId];thisCondition.remove();displayConditionsSortable();displayConditionsUpdateSubmitJSON()});postBody.on('click touch tap',displayConditionsRowsSelector+' '+displayConditionsRowsCopyBtnSelector+', '+displayConditionsRowsSelector+' '+displayConditionsRowsDeleteBtnSelector,function(e){e.preventDefault();e.stopPropagation();updateDisplayConditionsTableHeight($(this))});postBody.on('click touch tap',displayConditionsRowsSelector+' '+displayConditionsRowsEditBtnSelector,function(e){e.preventDefault();e.stopPropagation();let pThis=$(this),thisCondition=pThis.parent().parent();displayConditionsCondition=thisCondition.attr('data-condition');displayConditionsConditionId=thisCondition.attr('data-conditionid');if(typeof etBfbAppFrame.get!=="function"){let miniOverlay=$('.divilife-minioverlay');miniOverlay.attr('data-divilifeopenconditiontype',displayConditionsCondition);miniOverlay.attr('data-divilifeopenconditionid',displayConditionsConditionId);if(fbSettingsOptionsSelect.find('.divi-life-logo-icon').length<1){fbSettingsOptionsSelect.append($('<li/>').html(divilife_logo));fbSettingsOptionsSelect.css('min-height',miniOverlayDefaultHeight+'px');fbSettingsSelectWrapper.append(fbSettingsOptionsSelect)}}else{getConditionContent('edit')}toggleDiviMiniOverlay(1);updateDiviMiniOverlaysPosition()});function getDisplayConditionsList(){let ETBuilderBackend=etBfbAppFrame.get(0).contentWindow.ETBuilderBackend;conditionsi18n=ETBuilderBackend.i18n.displayConditions;featureConditions=new diviOverlaysFeatureConditions(ETBuilderBackend,conditionsi18n);let dataConditionNames=featureConditions.dataConditionNames,loggedInStatusField=featureConditions.loggedInStatusField,userRoleFields=featureConditions.userRoleFields,dateTimeFields=featureConditions.dateTimeFields,postTypeFields=featureConditions.postTypeFields,authorFields=featureConditions.authorFields,categoriesFields=featureConditions.categoriesFields,tagsFields=featureConditions.tagsFields,dateArchiveFields=featureConditions.dateArchiveFields,productPurchaseFields=featureConditions.productPurchaseFields,cartContentsField=featureConditions.cartContentsField,searchResultsFields=featureConditions.searchResultsFields,operatingSystemFields=featureConditions.operatingSystemFields,browserFields=featureConditions.browserFields,pageVisitFields=featureConditions.pageVisitFields,postVisitFields=featureConditions.postVisitFields,cookieFields=featureConditions.cookieFields,categoryPageFields=featureConditions.categoryPageFields,tagPageFields=featureConditions.tagPageFields,numberOfViewsFields=featureConditions.numberOfViewsFields,defaultFields=featureConditions.defaultFields,productStockFields=featureConditions.productStockFields,urlParameterFields=featureConditions.urlParameterFields;createModalWrapperConditions();conditions.conditionFields=conditions.conditionGroups=conditions.conditionNames=void 0;conditions.conditionNames=dataConditionNames;conditions.conditionGroups={postInfo:"Post Info",location:"Location",user:"User",interaction:"Interaction",device:"Device"};conditions.conditionFields={loggedInStatus:loggedInStatusField,userRole:userRoleFields,dateTime:dateTimeFields(),postType:postTypeFields,author:authorFields,categories:categoriesFields,tags:tagsFields,dateArchive:dateArchiveFields(),productPurchase:productPurchaseFields,cartContents:cartContentsField,productStock:productStockFields,searchResults:searchResultsFields,operatingSystem:operatingSystemFields,browser:browserFields,pageVisit:pageVisitFields,postVisit:postVisitFields,cookie:cookieFields,categoryPage:categoryPageFields,tagPage:tagPageFields,numberOfViews:numberOfViewsFields,urlParameter:urlParameterFields,defaultFields:defaultFields};renderDisplayConditionsList(conditions)}function renderDisplayConditionsList(conditions){let settingsCustomSelectWrapper=$('<li/>',{"class":'et-fb-settings-custom-select-wrapper-inner et-fb-allow-mouse-wheel-form'}),settingsCustomSelectWrapperUL=$('<ul/>'),miniOverlay=$('.divilife-minioverlay');displayConditionsCondition=miniOverlay.attr('data-divilifeopenconditiontype');displayConditionsConditionId=miniOverlay.attr('data-divilifeopenconditionid');$.each(conditions.conditionGroups,function(conditionGroupKey,conditionGroupTitle){let settingsCustomSubGroupSeparator=$('<li/>',{"class":'et-fb-option-subgroup et-fb-option-subgroup-separator'}),settingsCustomSubGroupTitle=$('<p/>',{"class":'et-fb-subgroup-title'}),settingsCustomSubGroupUL=$('<ul/>');settingsCustomSubGroupTitle.html(conditionGroupTitle);$.each(conditions.conditionNames[conditionGroupKey],function(conditionNameKey,conditionName){settingsCustomSubGroupUL.append('<li class="select-option-item select-option-item-'+conditionNameKey+'" data-value="'+conditionNameKey+'" data-conditionname="'+conditionName+'" data-group="'+conditionGroupKey+'"><span class="select-option-item__name">'+conditionName+'</span></li>')});settingsCustomSubGroupSeparator.append(settingsCustomSubGroupTitle);settingsCustomSubGroupSeparator.append(settingsCustomSubGroupUL);settingsCustomSelectWrapperUL.append(settingsCustomSubGroupSeparator)});settingsCustomSelectWrapper.append(settingsCustomSelectWrapperUL);fbSettingsOptionsSelect.html('');fbSettingsOptionsSelect.append(settingsCustomSelectWrapper);selectConditionsContent=fbSettingsOptionsSelect;if(displayConditionsCondition===''&&displayConditionsConditionId===''){fbSettingsSelectWrapper.append(selectConditionsContent);updateDiviMiniOverlaysPosition()}else{getConditionContent('edit')}displayConditionsSelectOptionHover();displayConditionsSelectOptionRenderContent()}function displayConditionsSelectOptionHover(customfbSettingsOptionsSelect){if(typeof customfbSettingsOptionsSelect!=='undefined'){fbSettingsOptionsSelect=customfbSettingsOptionsSelect}if(typeof fbSettingsOptionsSelect==='undefined'){return}displayConditionsSelectOptions=fbSettingsOptionsSelect.find(fbSettingsSelectOption);displayConditionsSelectOptions.hover(function(){$(this).addClass(fbSettingsSelectOptionHover)},function(){$(this).removeClass(fbSettingsSelectOptionHover)})}function displayConditionsSelectOptionRenderContent(){displayConditionsSelectOptions.on('click touch tap',function(e){$(this).removeClass(fbSettingsSelectOptionHover);let conditionElem=$(this);displayConditionsCondition=conditionElem.attr('data-value');displayConditionsConditionName=conditionElem.attr('data-conditionname');displayConditionsConditionGroup=conditionElem.attr('data-group');getConditionContent('add');updateDiviMiniOverlaysPosition()})}function getConditionContent(option){renderDisplayCondition(option)}function renderDisplayCondition(option){if(option==='add'){displayConditionsConditionId=''}let condition=displayConditionsCondition,conditionId=displayConditionsConditionId;selectConditionsContent.detach();if(typeof conditionsContent[condition]!=='undefined'){fbSettingsSelectWrapper.html('');delete conditionsContent[condition]}let loadingSpinner=getLoadingSpinner(),conditionContent=miniOverlayModalContainer.html(modalConditionsWrapper),miniOverlayModalContent=conditionContent.find('.'+miniOverlayModalContentCSSClass);prepareConditionContent(conditionContent);miniOverlayModalContent.html(loadingSpinner);conditionsContent[condition]=conditionContent;removeDiviMiniOverlayActiveClass();fbSettingsSelectWrapper.append(conditionsContent[condition]);miniOverlayModalContent.attr('data-conditionfeature',condition);miniOverlayModalContent.attr('data-conditionid',conditionId)}function prepareConditionContent(conditionContent){let search='',page=1,condition=displayConditionsCondition,group=displayConditionsConditionGroup,contentPrinted=false;switch(condition){case "userRole":getUserRoles(search).query.fail((function(e,t,n){console.log(e,t,n)})).done((function(e){printConditionContentOnMiniOverlay(conditionContent,e)}));contentPrinted=true;break;case "postType":getPostTypes(search,page).query.fail((function(e,t,n){console.log(e,t,n)})).done((function(e){printConditionContentOnMiniOverlay(conditionContent,e)}));contentPrinted=true;break;case "author":getAuthors(search).query.fail((function(e,t,n){console.log(e,t,n)})).done((function(e){printConditionContentOnMiniOverlay(conditionContent,e)}));contentPrinted=true;break;case "categories":case "categoryPage":getCategories(search).query.fail((function(e,t,n){console.log(e,t,n)})).done((function(e){printConditionContentOnMiniOverlay(conditionContent,e)}));contentPrinted=true;break;case "tags":case "tagPage":getTags(search).query.fail((function(e,t,n){console.log(e,t,n)})).done((function(e){printConditionContentOnMiniOverlay(conditionContent,e)}));contentPrinted=true;break;case "loggedInStatus":case "dateArchive":case "searchResults":case "browser":case "operatingSystem":case "cookie":case "numberOfViews":case "urlParameter":case "dateTime":setTimeout(()=>{printConditionContentOnMiniOverlay(conditionContent)},1);contentPrinted=true;break;case "pageVisit":searchPosts(search,page,'page').query.fail((function(e,t,n){console.log(e,t,n)})).done((function(e){printConditionContentOnMiniOverlay(conditionContent,e)}));contentPrinted=true;break;case "postVisit":searchPosts(search,page,'post').query.fail((function(e,t,n){console.log(e,t,n)})).done((function(e){printConditionContentOnMiniOverlay(conditionContent,e)}));contentPrinted=true;break;case "productPurchase":case "cartContents":case "productStock":searchProducts(search,page).query.fail((function(e,t,n){console.log(e,t,n)})).done((function(e){printConditionContentOnMiniOverlay(conditionContent,e)}));contentPrinted=true;break;default:}if(contentPrinted===false){if(typeof group==='undefined'){group='location'}switch(group){case "location":searchPosts(search,page,condition).query.fail((function(e,t,n){console.log(e,t,n)})).done((function(e){printConditionContentOnMiniOverlay(conditionContent,e)}));break;default:}}}function printConditionContentOnMiniOverlay(conditionContent,e){let condition=displayConditionsCondition,conditionId=displayConditionsConditionId,conditionName=displayConditionsConditionName,results='',totalPages='',conditionFields=conditions.conditionFields[condition];if(typeof e!=='undefined'){results=e.data.results;if(typeof e.data.meta!=='undefined'){totalPages=(e.data.meta.pagination.pages.total)?1:e.data.meta.pagination.pages.total}}if(typeof conditionFields==='undefined'){conditionFields=conditions.conditionFields['defaultFields']}let fields=getFields(conditionFields,results,totalPages,conditionId,conditionName),miniOverlayModalContent=conditionContent.find('.'+miniOverlayModalContentCSSClass);miniOverlayModalContent.html('');miniOverlayModalContent.prepend(fields);conditionContent.parent().append(miniOverlayModalButtonGroup);if((condition==='cookie'||condition==='productPurchase'||condition==='cartContents'||condition==='numberOfViews'||condition==='urlParameter'||condition==='dateTime')){let conditionshowhidefields=miniOverlayModalContent.find('div[data-conditionshowhidefields="true"] input:checked'),showfield;if(conditionshowhidefields.length==0){conditionshowhidefields=miniOverlayModalContent.find('div[data-conditionshowhidefields="true"] input[value="on"]')}if(conditionshowhidefields.length>0){$.each(conditionshowhidefields,function(idx,cshf){let input=$(cshf);showfield=input.attr('data-conditionshowfield');showConditionInputs(showfield)})}}removeDiviMiniOverlayActiveClass();if(condition==='dateTime'){setTimeout(()=>{updateDiviMiniOverlaysPosition()},50)}else{updateDiviMiniOverlaysPosition()}}function searchPosts(search,page,postType){return{searchResponse:search,query:$.ajax({type:"GET",dataType:"json",url:etBfbAppFrame.get(0).contentWindow.ETBuilderBackend.ajaxUrl,data:{action:"et_builder_search_posts",nonce:etBfbAppFrame.get(0).contentWindow.ETBuilderBackend.nonces.searchPosts,post_type:postType,page:page,search:search}}),isLoading:false,totalPages:1}}function getAuthors(search){return{authors:search,query:$.ajax({type:"GET",dataType:"json",url:etBfbAppFrame.get(0).contentWindow.ETBuilderBackend.ajaxUrl,data:{action:"et_builder_ajax_get_authors",nonce:etBfbAppFrame.get(0).contentWindow.ETBuilderBackend.nonces.getAuthors}}),isLoading:false,totalPages:1}}function getPostTypes(search,page){return{postTypes:search,query:$.ajax({type:"GET",dataType:"json",url:etBfbAppFrame.get(0).contentWindow.ETBuilderBackend.ajaxUrl,data:{action:"et_builder_ajax_get_post_types",nonce:etBfbAppFrame.get(0).contentWindow.ETBuilderBackend.nonces.getPostTypes,page:page,search:search}}),isLoading:false,totalPages:1}}function getCategories(search){return{categories:search,query:$.ajax({type:"GET",dataType:"json",url:etBfbAppFrame.get(0).contentWindow.ETBuilderBackend.ajaxUrl,data:{action:"et_builder_ajax_get_categories",nonce:etBfbAppFrame.get(0).contentWindow.ETBuilderBackend.nonces.getCategories,search:search}}),isLoading:false}}function getTags(search){return{tags:search,query:$.ajax({type:"GET",dataType:"json",url:etBfbAppFrame.get(0).contentWindow.ETBuilderBackend.ajaxUrl,data:{action:"et_builder_ajax_get_tags",nonce:etBfbAppFrame.get(0).contentWindow.ETBuilderBackend.nonces.getTags,search:search}}),isLoading:false}}function searchProducts(search,page){return{searchResponse:search,query:$.ajax({type:"GET",dataType:"json",url:etBfbAppFrame.get(0).contentWindow.ETBuilderBackend.ajaxUrl,data:{action:"et_builder_ajax_search_products",nonce:etBfbAppFrame.get(0).contentWindow.ETBuilderBackend.nonces.searchProducts,page:page,search:search}}),isLoading:false,totalPages:1}}function getUserRoles(search){return{userRoles:search,query:$.ajax({type:"GET",dataType:"json",url:etBfbAppFrame.get(0).contentWindow.ETBuilderBackend.ajaxUrl,data:{action:"et_builder_ajax_get_user_roles",nonce:etBfbAppFrame.get(0).contentWindow.ETBuilderBackend.nonces.getUserRoles}}),isLoading:false,totalPages:1}}function getLoadingSpinner(){return '<div style="width: calc(100% - 60px);" class="et-fb-settings-option et-fb-option--multiselect-post_types"><div class="et-fb-option-container"><div class="et-fb-field-settings-modal__field"><div class="et-fb-settings-option-multiselect et-fb-settings-option-searchable-posts"><div class="et-fb-multiselect-wrap"><div class="et-fb-multiselect-items"><div class="et-fb-multiple-checkboxes-wrap et-fb-multiselect-deselected-items">'+divilife_logo.prop('outerHTML')+'</div></div></div></div></div></div></div>'}function createModalWrapperConditions(){miniOverlayModalButtonGroup.append(miniOverlayModalButtonDiscard);miniOverlayModalButtonGroup.append(miniOverlayModalButtonSave);miniOverlayModalContentForm.append(miniOverlayModalContent);miniOverlayModalScroll.append(miniOverlayModalContentForm);miniOverlayModalScrollWrapper.append(miniOverlayModalScroll);modalConditionsWrapper=miniOverlayModalScrollWrapper.html()}const displayConditionsBtnCancelCSSSelector='.divilife-et-fb-display-conditions .et-fb-button--danger',displayConditionsBtnSaveCSSSelector='.divilife-et-fb-display-conditions .et-fb-button--success',displayConditionsBtns=displayConditionsBtnCancelCSSSelector+', '+displayConditionsBtnSaveCSSSelector;$(displayConditionsBtns).off('click touch tap');postBody.on('click touch tap',displayConditionsBtns,function(e){e.preventDefault();e.stopPropagation();let pThis=$(this),miniOverlayId=pThis.parents('[data-divilifeopenminioverlay]').attr('data-divilifeopenminioverlay');toggleDiviMiniOverlay(miniOverlayId)});function getRandomConditionRowId(condition){let displayConditionsRowsLength=displayConditionsRows.find('div[draggable="true"]').length,conditionRowId='',ref1=Math.floor((Math.random()*99999)+1),ref2=Math.floor((Math.random()*99999)+1),ref3=Math.floor((Math.random()*99999)+1),ref4=Math.floor((Math.random()*99999)+1);if(displayConditionsRowsLength>0){conditionRowId=displayConditionsRowsLength+1}conditionRowId='condition-'+condition+'-'+ref1+'-'+ref2+'-'+ref3+'-'+ref4;return conditionRowId}postBody.on('click touch tap',displayConditionsBtnCancelCSSSelector,function(e){let pThis=$(this),condition=miniOverlayModalContent.attr('data-conditionfeature');delete conditionsContent[condition];fbSettingsSelectWrapper.html('')});postBody.on('click touch tap',displayConditionsBtnSaveCSSSelector,function(e){let miniOverlayModalContent=$('.divilife-minioverlay .'+miniOverlayModalContentCSSClass),condition=miniOverlayModalContent.attr('data-conditionfeature'),conditionId=miniOverlayModalContent.attr('data-conditionid');if(conditionId==''){conditionId=getRandomConditionRowId(condition)}let conditionData={id:conditionId,condition:condition,conditionSettings:getFieldsValues(condition),operator:'AND'};saveConditions[conditionId]=conditionData;fbSettingsSelectWrapper.html('');delete conditionsContent[condition];addEditConditionsRow(conditionId);updateDisplayConditionsTableHeight()});function displayConditionsUpdateSubmitJSON(){let conditionFormFields=$(displayConditionsRows).sortable("toArray",{attribute:'data-conditionid'}),displayConditionsJSON,newSaveConditions=[];$.each(conditionFormFields,function(idx,conditionId){let conditionData=saveConditions[conditionId];$.each(conditionData['conditionSettings'],function(idx,setting){if(idx==='enableCondition'||idx==='resetAfterDuration'||idx==='allDay'||idx==='repeat'){if(conditionData['conditionSettings'][idx]==='1'){conditionData['conditionSettings'][idx]='on'}if(conditionData['conditionSettings'][idx]==='0'){conditionData['conditionSettings'][idx]='off'}}if(idx==='weekdays'){if(Array.isArray(setting)===true){let weekdays=setting,weekdaysData=[],weekdaysParsed='',condition=saveConditions[conditionId]['condition'],conditionWeekdays=conditions.conditionFields[condition][idx]['options'];for(let widx in weekdays){if(weekdays.hasOwnProperty(widx)){weekdaysData[weekdays[widx]['value']]=1}}for(let day in conditionWeekdays){if(weekdaysData[day]){if(weekdaysParsed!==''&&weekdaysParsed!=='|'){weekdaysParsed+='|'+day}else{weekdaysParsed+=day}}else{weekdaysParsed+='|'}}conditionData['conditionSettings'][idx]=weekdaysParsed}}if(typeof setting==='object'){if(Array.isArray(setting)===false){conditionData['conditionSettings'][idx]=JSON.stringify(setting)}}});newSaveConditions[idx]=conditionData});displayConditionsJSON=JSON.stringify(newSaveConditions);inputDisplayConditionsJSON.val(displayConditionsJSON)}function addEditConditionsRow(conditionId){if(typeof saveConditions!=='undefined'){let conditionExists=$('div[data-conditionid="'+conditionId+'"]'),newCondition,type=saveConditions[conditionId]['condition'],totalSaveConditions=displayConditionsRows.find('div[draggable="true"]').length;if(conditionExists.length>0){newCondition=conditionExists}else{conditionsRowsItem.append(conditionsRowsBtnEdit);conditionsRowsItem.append(conditionsRowsBtnCopy);conditionsRowsItem.append(conditionsRowsBtnDelete);conditionsRowsItem.append(conditionsRowsItemTitle);conditionsRowsWrapper.append(conditionsRowsItem);newCondition=conditionsRowsWrapper.clone();if(totalSaveConditions>0){newCondition.insertAfter(displayConditionsRowsSelector+' div[draggable="true"]:last')}else{displayConditionsRows.prepend(newCondition)}}newCondition.attr('data-conditionid',conditionId).attr('data-condition',type);newCondition.find('.'+conditionsRowsItemTitleSelector).html(saveConditions[conditionId]['conditionSettings']['adminLabel']);displayConditionsSortable();displayConditionsUpdateSubmitJSON()}}function getFieldsValues(condition){let conditionSettings={};if(typeof condition!=='undefined'){let fields=$(conditionsWrapperSelector+' .et-fb-field-settings-modal__content-form').serializeArray(),x=0,conditionFields=conditions.conditionFields[condition];if(typeof conditionFields==='undefined'){conditionFields=conditions.conditionFields['defaultFields']}$.each(fields,function(idx,field){let input=$('input[name="'+field['name']+'"]'),conditionSetting=input.attr('data-conditionsetting'),conditionSettingType=conditionFields[conditionSetting]['type'],conditionLabel=input.attr('data-conditionlabel'),conditionValue=input.val(),group=input.attr('data-conditiongroup'),groupSlug=input.attr('data-conditiongroupslug'),isCatchAll=input.attr('data-conditioniscatchall'),multiselectData;if(conditionSettingType==='text'||conditionSettingType==='select'||conditionSettingType==='yes_no_button'||conditionSettingType==='date_picker'){conditionSettings[conditionSetting]=conditionValue.trim()}if(conditionSettingType==='multiselect'||conditionSettingType==='checkboxes'){multiselectData={'label':conditionLabel,'value':conditionValue};if(typeof conditionSettings[conditionSetting]==='undefined'){conditionSettings[conditionSetting]=[]}conditionSettings[conditionSetting][x]=multiselectData;x+=1}if(conditionSettingType==='input_time'){conditionValue=conditionValue.trim();if(typeof conditionSettings[conditionSetting]==='undefined'){conditionSettings[conditionSetting]=conditionValue}else{conditionSettings[conditionSetting]=conditionSettings[conditionSetting]+':'+conditionValue}}if(conditionSettingType==='multiselect_categories'||conditionSettingType==='multiselect_tags'){multiselectData={'label':conditionLabel,'value':conditionValue,"group":group,"groupSlug":groupSlug,"isCatchAll":isCatchAll};if(typeof conditionSettings[conditionSetting]==='undefined'){conditionSettings[conditionSetting]=[]}conditionSettings[conditionSetting][x]=multiselectData;x+=1}})}return conditionSettings}function getFields(conditionSettings,results,totalPages,conditionId,conditionName){if(conditionId===''){conditionId=null}let fields='',isDefault=false;if(typeof conditionSettings!=='undefined'){if(typeof conditionSettings['dynamicPosts']!=='undefined'){isDefault=true}$.each(conditionSettings,function(settingId,setting){let placeholder=setting['default'],label=setting['label'],type=setting['type'],defaultValue=setting['default'],field,data,visibility=setting['visibility'],showhidefields=setting['showhidefields'];if(setting['type']==='select'||setting['type']==='checkboxes'||setting['type']==='yes_no_button'){data=setting['options']}if(setting['type']==='multiselect'||setting['type']==='multiselect_categories'||setting['type']==='multiselect_tags'){data=results}if(isDefault===true){if(settingId==='displayRule'){label=label+' '+conditionName}if(settingId==='adminLabel'){defaultValue=conditionName}}if(setting['type']==='input_time'){data=[];data['hourLabel']=setting['hourLabel'];data['minuteLabel']=setting['minuteLabel']}field=getField(type,{'formLabel':label,'formInputName':settingId,'defaultValue':defaultValue,'placeholder':placeholder,'data':data,'totalPages':totalPages,'visibility':visibility,'showhidefields':showhidefields},conditionId);fields+=field})}return fields}function getField(type,values,conditionId){let containerSettingsOption=$('<div/>',{"class":'et-fb-option-container'}),wrapperSettingsField=$('<div/>',{"class":'et-fb-field-settings-modal__field'}),fieldWrapper,fieldContent,formLabel=conditionsi18n[values['formLabel']],formName=values['formInputName'],defaultValue=values['defaultValue'],placeholder=values['placeholder'],data=values['data'],totalPages=values['totalPages'],visibility=(values['visibility']===false)?' do-hide':'',showhidefields=(values['showhidefields']===true)?true:'';if(formLabel===''||typeof formLabel==='undefined'){formLabel=values['formLabel']}if(conditionId!==null){defaultValue=saveConditions[conditionId]['conditionSettings'][formName]}switch(type){case 'text':if(defaultValue===placeholder&&formName!=='adminLabel'){defaultValue=''}fieldWrapper=$('<div/>',{"class":'et-fb-settings-option et-fb-option--text'+visibility,"data-conditionfeaturesetting":formName,"style":'width: calc(100% - 60px);'});fieldContent=$('<p/>',{"class":'et-fb-form__label'}).html(formLabel).prop('outerHTML');fieldContent+=$('<input/>',{"class":'et-fb-settings-option-input et-fb-main-setting regular-text',"type":'text',"name":'conditionSetting['+formName+']',"id":'et-fb-'+formName,"placeholder":placeholder,"value":defaultValue,"data-conditionsetting":formName}).prop('outerHTML');break;case 'select':fieldWrapper=$('<div/>',{"class":'et-fb-settings-option et-fb-option--select'+visibility,"data-conditionfeaturesetting":formName,"data-conditionshowhidefields":showhidefields,"style":'width: calc(100% - 60px);'});fieldContent=$('<p/>',{"class":'et-fb-form__label'}).html(formLabel).prop('outerHTML');fieldContent+='<div class="et-fb-settings-custom-select-wrapper-outer">';fieldContent+='<div class="et-fb-settings-custom-select-wrapper et-fb-settings-option-select-closed">';if($(data).length>0){fieldContent+='<ul class="et-fb-settings-option-select et-fb-settings-option-select-advanced et-fb-main-setting">';if(conditionId!==null){defaultValue=saveConditions[conditionId]['conditionSettings'][formName]}$.each(data,function(idx,option){let labeli18n=(typeof conditionsi18n[option]!=='undefined')?conditionsi18n[option]:option,showfield='';if(Array.isArray(labeli18n)){labeli18n=labeli18n[0];showfield=option[1]}if(defaultValue===idx){fieldContent+='<li class="select-option-item et-fb-selected-item select-option-item-'+idx+'" data-value="'+idx+'"';if(showfield!==''){fieldContent+=' data-conditionshowfield="'+showfield+'"'}fieldContent+='>';fieldContent+='	<span class="select-option-item__name">'+labeli18n+'</span><span class="et-fb-select-marker">';fieldContent+='	<div class="et-fb-icon et-fb-icon--menu-expand" style="fill: rgb(190, 201, 213); width: 28px; min-width: 28px; height: 28px; margin: -6px;">';fieldContent+='	<svg viewBox="0 0 28 28" preserveAspectRatio="xMidYMid meet" shape-rendering="geometricPrecision"><g fill-rule="evenodd"><path d="M14 20l-3-5h6zM14 8l3 5h-6z" fill-rule="evenodd"></path></g></svg>';fieldContent+='	</div>';fieldContent+='	</span>';fieldContent+='</li>';return false}});fieldContent+='<li class="et-fb-settings-custom-select-wrapper-inner et-fb-allow-mouse-wheel-form do-hide">';fieldContent+='<ul>';$.each(data,function(idx,option){let labeli18n=(typeof conditionsi18n[option]!=='undefined')?conditionsi18n[option]:option,selected=false,showfield='';if(Array.isArray(labeli18n)){labeli18n=labeli18n[0];showfield=option[1]}if(defaultValue===idx){selected=true}fieldContent+='<input type="checkbox" id="et-fb-multiple-checkbox-select-deselected-checkboxes-'+idx+'" class="do-hide" name="conditionSetting['+formName+']['+idx+']" value="'+idx+'" data-conditionsetting="'+formName+'"';if(showfield!==''){fieldContent+=' data-conditionshowfield="'+showfield+'"'}if(selected===true){fieldContent+=' checked'}fieldContent+='>';fieldContent+='<li class="select-option-item ';if(selected===true){fieldContent+='et-fb-selected-item '}fieldContent+='select-option-item-'+idx+'" data-value="'+idx+'">';fieldContent+='	<span class="select-option-item__name">'+labeli18n+'</span>';if(selected===true){fieldContent+='	<div class="et-fb-icon et-fb-icon--check" style="fill: rgb(55, 196, 170); width: 28px; min-width: 28px; height: 28px; margin: -6px;">';fieldContent+='	<svg viewBox="0 0 28 28" preserveAspectRatio="xMidYMid meet" shape-rendering="geometricPrecision"><g><path d="M19.203 9.21a.677.677 0 0 0-.98 0l-5.71 5.9-2.85-2.95a.675.675 0 0 0-.98 0l-1.48 1.523a.737.737 0 0 0 0 1.015l4.82 4.979a.677.677 0 0 0 .98 0l7.68-7.927a.737.737 0 0 0 0-1.015l-1.48-1.525z" fill-rule="evenodd"></path></g></svg>';fieldContent+='	</div>'}fieldContent+='</li>'});fieldContent+='</li></ul>';fieldContent+='</ul>'}fieldContent+='</div></div>';break;case 'multiselect':fieldWrapper=getFieldMultiSelectOuterWrapper(formName,visibility);fieldContent=getFieldMultiSelectInnerWrapperStart();if($(data).length>0){let multiSelectValues=[];if(conditionId!==null){let parseValues=saveConditions[conditionId]['conditionSettings'][formName];$.each(parseValues,function(idx,data){multiSelectValues[data.value]=data})}$.each(data,function(idx,post){let labeli18n=(typeof conditionsi18n[post.label]!=='undefined')?conditionsi18n[post.label]:post.label,selected=false;if(conditionId!==null){defaultValue=multiSelectValues[post.value];if(typeof defaultValue!=='undefined'){defaultValue=post.value}}if(defaultValue===post.value){selected=true}fieldContent+='<p><label for="et-fb-multiple-checkbox-multiselect-deselected-checkboxes-'+idx+'">';fieldContent+='<input type="checkbox" id="et-fb-multiple-checkbox-multiselect-deselected-checkboxes-'+idx+'" name="conditionSetting['+formName+']['+post.value+']" value="'+post.value+'" data-conditionsetting="'+formName+'" data-conditionlabel="'+labeli18n+'"';if(selected===true){fieldContent+=' checked'}fieldContent+='>';fieldContent+=labeli18n+'</label></p>'})}fieldContent+=getFieldMultiSelectInnerWrapperEnd();break;case 'multiselect_categories':case 'multiselect_tags':fieldWrapper=getFieldMultiSelectOuterWrapper(formName,visibility);fieldContent=getFieldMultiSelectInnerWrapperStart();if($(data).length>0){let multiSelectValues=[];if(conditionId!==null){let parseValues=saveConditions[conditionId]['conditionSettings'][formName];$.each(parseValues,function(idx,data){multiSelectValues[data.value]=data})}$.each(data,function(idx,result){let taxonomyName=result[0]['taxonomyName'],taxonomySlug=result[0]['taxonomySlug'],allTaxonomiesName="All "+taxonomyName,allTaxonomiesSlug="all_"+taxonomySlug,isCatchAllSelected=false;fieldContent+='<p class="et-fb-multiple-checkbox-group-name">'+taxonomyName+'</p>';if(Array.isArray(result)){fieldContent+='<p><label for="et-fb-multiple-checkbox-multiselect-deselected-checkboxes-'+allTaxonomiesSlug+'">';fieldContent+='<input type="checkbox" id="et-fb-multiple-checkbox-multiselect-deselected-checkboxes-'+allTaxonomiesSlug+'" name="conditionSetting['+formName+']['+allTaxonomiesSlug+']" value="'+allTaxonomiesSlug+'" data-conditionsetting="'+formName+'" data-conditionlabel="'+allTaxonomiesName+'" data-alltaxonomies="'+idx+'" data-conditiongroup="'+taxonomyName+'" data-conditiongroupslug="'+idx+'" data-conditioniscatchall="true"';if(conditionId!==null){defaultValue=multiSelectValues[allTaxonomiesSlug];if(typeof defaultValue!=='undefined'){defaultValue=allTaxonomiesSlug;isCatchAllSelected=true}}if(isCatchAllSelected===true){fieldContent+=' checked'}fieldContent+='>';fieldContent+=allTaxonomiesName+'</label></p>';$.each(result,function(aidx,cat){let catName=cat.name,catId=cat.id,selected=false;if(conditionId!==null){defaultValue=multiSelectValues[catId];if(typeof defaultValue!=='undefined'){defaultValue=catName}}if(defaultValue===catName){selected=true}fieldContent+='<p';if(isCatchAllSelected===true){fieldContent+=' class="do-hide"'}fieldContent+='>';fieldContent+='<label for="et-fb-multiple-checkbox-multiselect-deselected-checkboxes-'+aidx+'">';fieldContent+='<input type="checkbox" id="et-fb-multiple-checkbox-multiselect-deselected-checkboxes-'+aidx+'" name="conditionSetting['+formName+']['+idx+']['+aidx+']" value="'+catId+'" data-conditionsetting="'+formName+'" data-conditionlabel="'+catName+'" data-conditiongroup="'+taxonomyName+'" data-conditiongroupslug="'+idx+'" data-conditioniscatchall="false"';if(selected===true){fieldContent+=' checked'}fieldContent+='>';fieldContent+=catName+'</label></p>'})}})}fieldContent+=getFieldMultiSelectInnerWrapperEnd();break;case "yes_no_button":fieldWrapper=$('<div/>',{"class":'et-fb-settings-option et-fb-option--yes-no_button'+visibility,"data-conditionfeaturesetting":formName,"data-conditionshowhidefields":showhidefields,"style":'width: calc(100% - 60px);'});fieldContent='<p class="et-fb-form__label">'+formLabel+'</p>';fieldContent+='<div class="et-core-control-toggle';if(defaultValue==='1'||defaultValue==='on'){fieldContent+=' et-core-control-toggle--on'}else if(defaultValue==='0'||defaultValue==='off'){fieldContent+=' et-core-control-toggle--off'}fieldContent+='">';$.each(data,function(idx,option){let labeli18n=(typeof conditionsi18n[option]!=='undefined')?conditionsi18n[option]:option;if(Array.isArray(labeli18n)){labeli18n=labeli18n[0]}fieldContent+='<div class="et-core-control-toggle__label et-core-control-toggle__label--'+idx+'"><div class="et-core-control-toggle__text">'+labeli18n+'</div><div class="et-core-control-toggle__handle"></div></div>'});fieldContent+='<input type="hidden" id="do-'+formName+'" name="conditionSetting['+formName+']" value="'+defaultValue+'" data-conditionsetting="'+formName+'"';let showfield='',conditionshowfieldwhen;if(Array.isArray(data['on'])){showfield=data['on'][1];conditionshowfieldwhen='on'}if(Array.isArray(data['off'])){showfield=data['off'][1];conditionshowfieldwhen='off'}if(showfield!==''){fieldContent+=' data-conditionshowfield="'+showfield+'" conditionshowfieldwhen="'+conditionshowfieldwhen+'"'}fieldContent+='>';fieldContent+='</div>';break;case "date_picker":thedatetimepicker=getDateTimePicker(false,defaultValue);fieldWrapper=$('<div/>',{"class":'et-fb-settings-option et-fb-option--date-picker'+visibility,"data-conditionfeaturesetting":formName,"style":'width: calc(100% - 60px);'});fieldContent=thedatetimepicker;fieldContent+=$('<input/>',{"class":'et-fb-option--date-picker-inputvalue do-hide',"type":'text',"name":'conditionSetting['+formName+']',"id":'et-fb-'+formName,"placeholder":placeholder,"value":defaultValue,"data-conditionsetting":formName}).prop('outerHTML');break;case "checkboxes":fieldWrapper=$('<div/>',{"class":'et-fb-settings-option et-fb-option--checkboxes'+visibility,"data-conditionfeaturesetting":formName,"style":'width: calc(100% - 60px);'});fieldContent='<div class="et-fb-multiple-checkboxes-wrap">';if($(data).length>0){let multiSelectValues=[];if(conditionId!==null){let parseValues=saveConditions[conditionId]['conditionSettings'][formName];if(formName==='weekdays'&&typeof parseValues!=='undefined'){parseValues=parseValues.split('|')}$.each(parseValues,function(idx,data){if(typeof data.value!=='undefined'){multiSelectValues[data.value]=data}else{multiSelectValues[data]=data}})}$.each(data,function(idx,option){let selected=false;if(conditionId!==null){defaultValue=multiSelectValues[idx];if(typeof defaultValue!=='undefined'){defaultValue=idx}}if(defaultValue===idx){selected=true}fieldContent+='<p><label for="et-fb-multiple-checkbox-browsers-undefined-'+idx+'">';fieldContent+='<input type="checkbox" id="et-fb-multiple-checkbox-browsers-undefined-'+idx+'" name="conditionSetting['+formName+']['+idx+']" value="'+idx+'" data-conditionsetting="'+formName+'" data-conditionlabel="'+option.label+'"';if(selected===true){fieldContent+=' checked'}fieldContent+='>';fieldContent+=option.label+'</label>';fieldContent+='</p>'})}fieldContent+='</div>';break;case "input_time":let hourLabel=(data['hourLabel']!=='')?data['hourLabel']:'',minuteLabel=(data['minuteLabel']!=='')?data['minuteLabel']:'',inputTimeContent,timeHourWrapper,hourFieldContent,timeMinuteWrapper,minuteFieldContent;defaultValue=defaultValue.split(':');fieldWrapper=$('<div/>',{"class":'et-fb-settings-option et-fb-option--input-time'+visibility,"data-conditionfeaturesetting":formName,"style":'width: calc(100% - 60px);'});timeHourWrapper=$('<div/>',{"class":'et-fb-input-time-col et-fb-input-time-col-1',"data-conditionfeaturesetting":formName});hourFieldContent=$('<label/>',{"class":'et-fb-form__label'}).html(hourLabel).prop('outerHTML');hourFieldContent+=$('<input/>',{'min':'0','max':'23','step':'1',"class":'et-fb-settings-option-input et-fb-input-time-hour-input',"type":'number',"name":'conditionSetting['+formName+'][hour]',"id":'et-fb-'+formName,"placeholder":defaultValue[0],"value":defaultValue[0],"data-conditionsetting":formName}).prop('outerHTML');timeHourWrapper.html(hourFieldContent);timeMinuteWrapper=$('<div/>',{"class":'et-fb-input-time-col et-fb-input-time-col-2',"data-conditionfeaturesetting":formName});minuteFieldContent=$('<label/>',{"class":'et-fb-form__label'}).html(minuteLabel).prop('outerHTML');minuteFieldContent+=$('<input/>',{'min':'0','max':'59','step':'1',"class":'et-fb-settings-option-input et-fb-input-time-minute-input',"type":'number',"name":'conditionSetting['+formName+'][minute]',"id":'et-fb-'+formName,"placeholder":defaultValue[1],"value":defaultValue[1],"data-conditionsetting":formName}).prop('outerHTML');timeMinuteWrapper.html(minuteFieldContent);inputTimeContent=$('<div/>',{"class":'et-fb-settings-option-input-time'});inputTimeContent.append(timeHourWrapper);inputTimeContent.append(timeMinuteWrapper);fieldContent=inputTimeContent.prop('outerHTML');break;case 'range':let rangeInnerWrapper,rangeInputsWrap,rangeInputrepeatTimes,rangeInputNumericControlWrapper,rangeInputNumericControl,rangeInputrepeatTimesNumber,rangeIncrementor,rangeIncrementorIncrease,rangeIncrementorDecrease;fieldWrapper=$('<div/>',{"class":'et-fb-settings-option et-fb-option--range'+visibility,"data-conditionfeaturesetting":formName,"data-conditionshowhidefields":showhidefields,"style":'width: calc(100% - 60px);'});fieldContent=$('<p/>',{"class":'et-fb-form__label'}).html(formLabel).prop('outerHTML');rangeInnerWrapper=$('<div/>',{"class":'et-fb-settings-option-inner et-fb-settings-option-inner-range'});rangeInputsWrap=$('<div/>',{"class":'et-fb-settings-option-inputs-wrap'});rangeInputrepeatTimes=$('<input/>',{'min':'0','max':'10','step':'1',"class":'et-fb-range',"type":'range',"name":'conditionSetting['+formName+']',"id":'et-fb-'+formName,"value":defaultValue,"data-conditionsetting":formName}).prop('outerHTML');rangeInputNumericControlWrapper=$('<div/>',{"class":'et-fb-range-number et-fb-settings-option-input'});rangeInputNumericControl=$('<div/>',{"class":'et-fb-settings-option--numeric-control'});rangeInputrepeatTimesNumber=$('<input/>',{'step':'1',"class":'et-fb-settings-option-input',"type":'text',"id":'et-fb-'+formName+'-number',"placeholder":placeholder,"value":defaultValue,"data-conditionsetting":formName}).prop('outerHTML');rangeIncrementor=$('<div/>',{"class":'et-fb-incrementor'});rangeIncrementorIncrease=$('<div/>',{"class":'increase'});rangeIncrementorDecrease=$('<div/>',{"class":'decrease'});rangeIncrementor.append(rangeIncrementorIncrease);rangeIncrementor.append(rangeIncrementorDecrease);rangeInputNumericControl.append(rangeInputrepeatTimesNumber);rangeInputNumericControl.append(rangeIncrementor);rangeInputNumericControlWrapper.append(rangeInputNumericControl);rangeInputsWrap.append(rangeInputrepeatTimes);rangeInputsWrap.append(rangeInputNumericControlWrapper);rangeInnerWrapper.append(rangeInputsWrap);fieldContent+=rangeInnerWrapper.prop('outerHTML');break;default:return ''}wrapperSettingsField.html(fieldContent);containerSettingsOption.html(wrapperSettingsField);fieldWrapper.html(containerSettingsOption.html());return fieldWrapper.prop('outerHTML')}function getFieldMultiSelectOuterWrapper(formName,visibility){return $('<div/>',{"class":'et-fb-settings-option et-fb-option--multiselect-post_types'+visibility,"data-conditionfeaturesetting":formName,"style":'width: calc(100% - 60px);'})}function getFieldMultiSelectInnerWrapperStart(){return '<div class="et-fb-settings-option-multiselect et-fb-settings-option-searchable-posts"><div class="et-fb-multiselect-wrap"><div class="et-fb-multiselect-items"><div class="et-fb-multiple-checkboxes-wrap et-fb-multiselect-deselected-items">'}function getFieldMultiSelectInnerWrapperEnd(){return '</div></div></div></div>'}postBody.on('keydown','#divioverlay_postsettings .et-fb-settings-option-input.et-fb-input-time-hour-input, #divioverlay_postsettings .et-fb-settings-option-input.et-fb-input-time-minute-input, .divilife-minioverlay .et-fb-option--range .et-fb-settings-option-input',function(evt){evt=(evt)?evt:window.event;let charCode=(evt.which)?evt.which:evt.keyCode;if((charCode>31&&(charCode<48||charCode>57))){return false}return true});postBody.on('input','#divioverlay_postsettings .et-fb-settings-option-input.et-fb-input-time-hour-input, #divioverlay_postsettings .et-fb-settings-option-input.et-fb-input-time-minute-input',function(evt){let pThis=$(this),n=parseInt(evt.target.value,10),a=n.toString(),i=1===a.length?'0'+a:a,inputTimeHour=false,inputTimeMinute=false;if(pThis.hasClass('et-fb-input-time-hour-input')===true){inputTimeHour=true}else if(pThis.hasClass('et-fb-input-time-minute-input')===true){inputTimeMinute=true}if(inputTimeHour===true&&n>23){pThis.val(23)}else if(inputTimeMinute===true&&n>59){pThis.val(59)}else{pThis.val(i)}});postBody.on('change','.divilife-minioverlay div[data-conditionshowhidefields="true"] input',function(e){let pThis=$(this),willShowHideFields=pThis.parents('div[data-conditionshowhidefields]');if(willShowHideFields.length>0){let showfields=willShowHideFields.find('input[data-conditionshowfield]');if(showfields.length>0){$.each(showfields,function(idx,showfield){let field=$(this);showfield=field.attr('data-conditionshowfield');showConditionInputs(showfield,field,pThis)})}}});function showConditionInputs(showfield,inputElem,inputChanged){const modalContentInnerWrapper=$('.divilife-minioverlay .'+miniOverlayModalContentCSSClass);let state='';if(typeof inputElem!=='undefined'){let inputElemAttrConditionField=inputElem.attr('data-conditionshowfield');if((inputElem.attr('type')==='checkbox'&&-1!==inputElemAttrConditionField.indexOf(showfield)&&inputElem.is(':checked')===false)||(inputElem.attr('conditionshowfieldwhen')==='off'&&inputElem.attr('type')==='hidden'&&inputElem.attr('value')==1)||(inputElem.attr('conditionshowfieldwhen')==='on'&&inputElem.attr('type')==='hidden'&&inputElem.attr('value')==0)){state='hide'}}if(typeof showfield!=='undefined'){if(-1!==showfield.indexOf(',')){const showfields=showfield.split(',');for(let i=0;i<showfields.length;i+=1){showHideConditionField(showfields[i],modalContentInnerWrapper,state,inputElem,inputChanged)}}else{showHideConditionField(showfield,modalContentInnerWrapper,state,inputElem,inputChanged)}}}function showHideConditionField(showfield,modalContentInnerWrapper,state,inputElem,inputChanged){if(typeof showfield!=='undefined'){let conditionField=modalContentInnerWrapper.find('div[data-conditionfeaturesetting="'+showfield+'"]');if(conditionField.length>0){if(typeof inputChanged!=='undefined'){let inputChangedAttrConditionShowField=inputChanged.attr('data-conditionshowfield');if(typeof inputChangedAttrConditionShowField!=='undefined'){const inputChangedFields=inputChangedAttrConditionShowField.split(',');for(let i=0;i<inputChangedFields.length;i+=1){if(inputElem.attr('type')==='checkbox'&&inputChangedFields[i]===showfield&&conditionField.hasClass('do-hide')===false){state='';break}}}}if(showfield==='repeatFrequencySpecificDays'||showfield==='repeatFrequency'){if($('.divioverlays-display-conditions input#do-repeat').attr('value')==='off'){state='hide'}}if(state==='hide'){conditionField.addClass('do-hide');conditionField.attr('data-conditionhidden',0)}else{conditionField.removeClass('do-hide');conditionField.attr('data-conditionhidden',1)}}}}postBody.on('click touch tap','[data-alltaxonomies]',function(e){let pThis=$(this),taxonomySlug=pThis.attr('data-alltaxonomies'),conditionSetting=pThis.attr('data-conditionsetting'),taxonomyChilds=$('input[name^="conditionSetting['+conditionSetting+']['+taxonomySlug+']"'),hidetaxonomyChilds=false;if(pThis.is(':checked')){hidetaxonomyChilds=true}if(taxonomyChilds.length>0){$.each(taxonomyChilds,function(idx,taxoChild){let pThis=$(this),taxoWrapper=pThis.parent().parent();if(hidetaxonomyChilds===true){taxoWrapper.addClass('do-hide')}else{taxoWrapper.removeClass('do-hide')}})}});postBody.on('click touch tap','.divilife-minioverlay .et-fb-settings-option-select-closed .et-fb-settings-option-select.et-fb-settings-option-select-advanced .select-option-item.et-fb-selected-item',function(e){let pThis=$(this),customSelectWrapper=pThis.parent().parent(),customSelectWrapperInner=customSelectWrapper.find('.et-fb-settings-custom-select-wrapper-inner');pThis.toggleClass(sHide);toggleSelectAdvancedField(customSelectWrapper,customSelectWrapperInner);displayConditionsSelectOptionHover(customSelectWrapperInner)});postBody.on('click touch tap','.divilife-minioverlay .et-fb-settings-option-select-active .et-fb-settings-option-select.et-fb-settings-option-select-advanced .select-option-item',function(e){let pThis=$(this),customSelectWrapper=pThis.parents('.et-fb-settings-custom-select-wrapper.et-fb-settings-option-select-active'),customSelectWrapperInner=customSelectWrapper.find('.et-fb-settings-custom-select-wrapper-inner'),thisOptionItemValue=pThis.attr('data-value'),thisOptionItemName=pThis.find('.select-option-item__name').html(),selectOptionItemNotAdvanced=customSelectWrapper.find('.select-option-item.et-fb-selected-item').filter(':hidden'),selectOptionItemNotAdvancedName=selectOptionItemNotAdvanced.find('.select-option-item__name'),selectInputs=customSelectWrapperInner.find('input[type="checkbox"]:checked'),selectInputsToCheckSelector='#et-fb-multiple-checkbox-select-deselected-checkboxes-'+thisOptionItemValue,selectInputsToCheck=customSelectWrapperInner.find(selectInputsToCheckSelector);selectOptionItemNotAdvanced.attr('data-value',thisOptionItemValue);selectOptionItemNotAdvancedName.html(thisOptionItemName);selectInputs.prop('checked',false);selectInputsToCheck.prop('checked',true);customSelectWrapperInner.find('.et-fb-icon--check').remove();pThis.append(selectOptionAdvancedChecked);toggleSelectAdvancedField(customSelectWrapper,customSelectWrapperInner);selectInputsToCheck.trigger("change");setTimeout(()=>{updateDiviMiniOverlaysPosition()},1)});postBody.on('click touch tap','.divilife-minioverlay .et-fb-option--yes-no_button[data-conditionshowhidefields="true"] .et-core-control-toggle',function(e){updateDiviMiniOverlaysPosition()});postBody.on('click touch tap','.divilife-minioverlay .et-fb-option--yes-no_button[data-conditionfeaturesetting="repeat"] .et-core-control-toggle',function(e){let pThis=$(this),displayRuleField=$('.divilife-minioverlay [data-conditionfeature="dateTime"] [data-conditionfeaturesetting="displayRule"] .select-option-item.et-fb-selected-item'),displayRuleFieldValue=displayRuleField.attr('data-value');if(displayRuleFieldValue==='isOnSpecificDays'){$('[data-conditionfeaturesetting="repeatFrequency"').addClass(sHide)}else if(displayRuleFieldValue==='isOnSpecificDate'){$('[data-conditionfeaturesetting="repeatFrequencySpecificDays"').addClass(sHide)}});postBody.on('click touch tap','.divilife-minioverlay [data-conditionfeature="dateTime"] [data-conditionfeaturesetting="displayRule"] .et-fb-settings-option-select-active .et-fb-settings-option-select.et-fb-settings-option-select-advanced .select-option-item',function(e){let pThis=$(this),displayRuleValue=pThis.attr('data-value'),data=featureConditions.conditionsDateTime[displayRuleValue],customSelectWrapper=pThis.parents('.et-fb-field-settings-modal__content'),repeat='repeat',allRepeatFields=customSelectWrapper.find('[data-conditionfeaturesetting^="repeat"]:not([data-conditionfeaturesetting="'+repeat+'"])');if(typeof data!=='undefined'){let repeatEnd='repeatEnd',condition=customSelectWrapper.attr('data-conditionfeature'),conditionId=customSelectWrapper.attr('data-conditionid'),setting=conditions.conditionFields[condition][repeatEnd],placeholder=setting['default'],label=setting['label'],type=setting['type'],visibility=setting['visibility'],showhidefields=setting['showhidefields'],repeatEndFieldCurrent=customSelectWrapper.find('.et-fb-option--select[data-conditionfeaturesetting="'+repeatEnd+'"]'),repeatEndFieldCurrentValue=repeatEndFieldCurrent.find('.select-option-item.et-fb-selected-item').attr('data-value'),defaultValue=(typeof repeatEndFieldCurrentValue==='undefined')?setting['default']:repeatEndFieldCurrentValue,repeatEndField,repeatEndFieldContent,repeatEndFieldOptions=setting['options'],repeatFieldValue=$('[data-conditionfeaturesetting="'+repeat+'"]').find('input[type="hidden"]').val();if(typeof data[defaultValue]==='undefined'){$('[data-conditionfeaturesetting="'+setting['options'][defaultValue][1]+'"]').addClass('do-hide');defaultValue=setting['default'];repeatEndFieldCurrentValue=defaultValue}if(conditionId===''){conditionId=null}repeatEndField=getField(type,{'formLabel':label,'formInputName':repeatEnd,'defaultValue':defaultValue,'placeholder':placeholder,'data':data,'totalPages':1,'visibility':visibility,'showhidefields':showhidefields},conditionId);repeatEndFieldContent=$(repeatEndField).html();repeatEndFieldCurrent.html(repeatEndFieldContent);showDateTimeRepeatFields(allRepeatFields,repeatFieldValue,displayRuleValue,repeatEndFieldCurrentValue)}else{showDateTimeRepeatFields(allRepeatFields)}updateDiviMiniOverlaysPosition()});function showDateTimeRepeatFields(allRepeatFields,repeatFieldValue,displayRuleValue,repeatEndFieldCurrentValue){if(typeof repeatFieldValue!=='undefined'){if(repeatFieldValue=='0'||repeatFieldValue=='off'){allRepeatFields.addClass(sHide)}if(repeatFieldValue=='1'||repeatFieldValue=='on'){let repeatFieldShowFields='[data-conditionfeaturesetting="repeatEnd"]';if(displayRuleValue==='isOnSpecificDate'){repeatFieldShowFields+=',[data-conditionfeaturesetting="repeatFrequency"]'}if(displayRuleValue==='isOnSpecificDays'){repeatFieldShowFields+=',[data-conditionfeaturesetting="repeatFrequencySpecificDays"]'}if(repeatEndFieldCurrentValue==='untilDate'){repeatFieldShowFields+=',[data-conditionfeaturesetting="repeatUntilDate"]'}if(repeatEndFieldCurrentValue==='afterNumberOfTimes'){repeatFieldShowFields+=',[data-conditionfeaturesetting="repeatTimes"]'}repeatFieldShowFields=$(repeatFieldShowFields);repeatFieldShowFields.removeClass(sHide)}}else{allRepeatFields.addClass(sHide)}}function toggleSelectAdvancedField(customSelectWrapper,customSelectWrapperInner){if(typeof customSelectWrapper!=='undefined'){let customSelectWrapperOuter=customSelectWrapper.parent(),customSelectUL=customSelectWrapper.find('.et-fb-settings-option-select.et-fb-settings-option-select-advanced'),toggleClasses=miniOverlaySettingsOptionClosed+' '+miniOverlaySettingsOptionActive,selectedItem=customSelectWrapper.find('.select-option-item.et-fb-selected-item').filter(':hidden'),customSelectFieldLabel=customSelectWrapperOuter.parent().find('.et-fb-form__label');if(customSelectFieldLabel.length>0){customSelectFieldLabel=customSelectFieldLabel.html()}if(typeof customSelectWrapperInner==='undefined'){customSelectWrapperInner=customSelectWrapper.find('.et-fb-settings-custom-select-wrapper-inner')}customSelectWrapper.toggleClass(toggleClasses);if(customSelectWrapperInner.hasClass(sHide)){customSelectWrapperOuter.prepend(miniOverlayOptionSelectAdvancedPlaceholder);customSelectWrapperInner.removeClass(sHide);if(customSelectFieldLabel!=''){customSelectWrapper.css('top','30px')}else{customSelectWrapper.css('top','10px')}customSelectWrapper.css('width','99%');customSelectWrapper.css('position','absolute');customSelectUL.css('max-height','150px');customSelectUL.css('transform','scale(1)')}else{customSelectWrapperOuter.find(miniOverlayOptionSelectAdvancedPlaceholder).remove();selectedItem=customSelectWrapper.find('.select-option-item.et-fb-selected-item').filter(':hidden');selectedItem.toggleClass(sHide);customSelectWrapperInner.addClass(sHide);customSelectWrapper.attr('style','');customSelectUL.attr('style','')}}}function callToggleSelectAdvancedField(){let optionSelectAdvancedActive=$('.et-fb-settings-custom-select-wrapper.et-fb-settings-option-select-active .et-fb-settings-option-select.et-fb-settings-option-select-advanced.et-fb-main-setting');if(optionSelectAdvancedActive.length>0&&optionSelectAdvancedActive.filter(':visible')){let customSelectWrapper=optionSelectAdvancedActive.parent();toggleSelectAdvancedField(customSelectWrapper);return true}return false}postBody.on('click touch tap','#divioverlay_postsettings [data-divilifeopenminioverlay]',function(e){let pThis=$(this),miniOverlayId=pThis.attr('data-divilifeopenminioverlay');toggleDiviMiniOverlay(miniOverlayId)});postBody.on('click touch tap',miniOverlayBackgroundSelector,function(e){if(callToggleSelectAdvancedField()===true){return}miniOverlayModalContent=$('.divilife-minioverlay .'+miniOverlayModalContentCSSClass);if(typeof miniOverlayModalContent.attr('data-conditionfeature')==='undefined'){toggleDiviMiniOverlay()}});postBody.on('click touch tap',conditionsWrapperSelector+' .'+miniOverlayModalContentCSSClass,function(e){let target=$(e.target);if(!target.hasClass('select-option-item')&&target.parents('.et-fb-settings-option-select.et-fb-settings-option-select-advanced').length===0){callToggleSelectAdvancedField()}});function toggleDiviMiniOverlay(miniOverlayId){if(typeof miniOverlayId==='undefined'){miniOverlay=$(miniOverlaySelector);if(miniOverlay.css('opacity')===0){return}}else{miniOverlay=$('[data-divilifeminioverlay="'+miniOverlayId+'"]')}if(miniOverlay.length>0){if(miniOverlayId===0){return}if(miniOverlay.hasClass(miniOverlaySettingsOptionClosed)){miniOverlay.css('opacity',0);miniOverlayBackground.css('display','block');miniOverlay.css('display','block');miniOverlay.css('z-index','9999');miniOverlay.removeClass(miniOverlaySettingsOptionClosed);miniOverlay.addClass(miniOverlaySettingsOptionActive+' '+miniOverlayClassSelectorGroupedOptions+' '+css_animate+' '+css_animate_bounceIn+' '+css_animate__faster);miniOverlay.animate({opacity:1},200);updateDiviMiniOverlaysViewportHeight()}else if(miniOverlay.hasClass(miniOverlayClassSelectorGroupedOptions)){miniOverlay.animate({opacity:0},150,function(){miniOverlay.removeClass(miniOverlaySettingsOptionActive+' '+miniOverlayClassSelectorGroupedOptions+' '+css_animate+' '+css_animate_bounceIn+' '+css_animate__faster);miniOverlay.addClass(miniOverlaySettingsOptionClosed);miniOverlayBackground.css('display','none');miniOverlay.css('display','none');miniOverlay.css('z-index','-1')})}}}function removeDiviMiniOverlayActiveClass(){if(typeof miniOverlay==='undefined'){return}return miniOverlay.removeClass(miniOverlaySettingsOptionActive)};postBody.on('click touch tap','[role="add-condition-button"]',function(e){if(typeof etBfbAppFrame.get!=="function"&&fbSettingsOptionsSelect.find('.divi-life-logo-icon').length<1){fbSettingsOptionsSelect.append($('<li/>').html(divilife_logo));fbSettingsOptionsSelect.css('min-height',miniOverlayDefaultHeight+'px');fbSettingsSelectWrapper.append(fbSettingsOptionsSelect)}else{if($(conditionsContent).length>0){$.each(conditionsContent,function(conditionType,conditionContent){conditionContent.detach()})}fbSettingsSelectWrapper.append(selectConditionsContent)}updateDiviMiniOverlaysPosition()});function updateDiviMiniOverlaysPosition(windowHeight){let miniOverlay=$('.divilife-minioverlay');if(miniOverlay.css('opacity')===0){return}if(typeof windowHeight==='undefined'){windowHeight=$(window).height()}miniOverlay.css('height','');let windowWidth=$(window).width(),miniOverlayHeight=miniOverlay.height(),miniOverlayWidth=miniOverlay.width(),miniOverlayModalButtonGroupHeight=miniOverlayModalButtonGroup.height(),offsetTop=50,offsetBottom=70,top=0;if(miniOverlayHeight===0){miniOverlayHeight=miniOverlayDefaultHeight}top=top+Math.round((windowHeight-miniOverlayHeight)/2);if(top<offsetTop||miniOverlayHeight===0){top=0;top=top+offsetTop}if(windowHeight<=miniOverlayHeight){miniOverlayModalContainer.css('max-height',(windowHeight-offsetBottom-miniOverlayModalButtonGroupHeight)+'px')}miniOverlay.css({'left':Math.round((windowWidth-miniOverlayWidth)/2),'top':top})}function updateDiviMiniOverlaysViewportHeight(){let offsetBottom=85,windowHeight=$(window).height()-offsetBottom;if(fbSettingsOptionsSelect.length&&fbSettingsOptionsSelect.filter(':visible')){let overlayHeight=fbSettingsOptionsSelect.height();fbSettingsOptionsSelect.css('max-height',windowHeight+'px')}updateDiviMiniOverlaysPosition();return windowHeight}window.addEventListener("orientationchange",function(){updateDiviMiniOverlaysViewportHeight()},false);window.addEventListener("resize",function(){updateDiviMiniOverlaysViewportHeight()},false);}})(jQuery,window,document);